<!DOCTYPE html><html><head>
      <title>ã€ŒAntVã€X6å¼€å‘å®è·µï¼šè¸©è¿‡çš„å‘ä¸è§£å†³æ–¹æ¡ˆï¼ˆæ€»ï¼‰</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1702520774692-4d5ee4a2-648f-43b3-ac05-b824d6eec961.png#averageHue=%23463a57&amp;clientId=u55942578-5ff7-4&amp;from=paste&amp;height=269&amp;id=u194edfe1&amp;originHeight=708&amp;originWidth=724&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=249605&amp;status=done&amp;style=none&amp;taskId=uf300d479-9911-484c-9eb5-2047655a16e&amp;title=&amp;width=274.6625061035156" alt="original.png"></p>
<h2 id="ï¸--å¦‚ä½•è‡ªå®šä¹‰æ‹–æ‹½æº">ğŸ–¼ï¸ | å¦‚ä½•è‡ªå®šä¹‰æ‹–æ‹½æºï¼Ÿ </h2>
<blockquote>
<p>ç›¸ä¿¡ä½ ä»¬åœ¨å¼€å‘ä¸­æ›´å¤šçš„éœ€æ±‚æ˜¯éœ€è¦è‡ªå®šä¹‰æ‹–æ‹½æºï¼Œæ¯•ç«Ÿè‡ªå®šä¹‰çš„åŠŸèƒ½æ‰©å±•æ€§é«˜ä¸€äº›ï¼Œè€Œä¸”å¯ä»¥æ ¹æ®ä½ çš„ä¸šåŠ¡éœ€æ±‚çµæ´»è®¾ç½®ã€‚è‡ªå®šä¹‰æ‹–æ‹½çš„ä¼˜ç‚¹å°±æ˜¯ï¼šä¸‡ç‰©çš†å¯æˆä¸ºæ‹–æ‹½æºï¼Œä¸ç®¡ä½ ä½¿ç”¨çš„æ˜¯htmlæ ‡ç­¾ï¼Œè¿˜æ˜¯ç¬¬ä¸‰æ–¹çš„uiæ¡†æ¶ï¼Œæˆ–è€…æ ‘å½¢åˆ—è¡¨ï¼Œâ€¦â€¦è¿™äº›éƒ½å¯ä»¥è®¾ç½®æˆæ‹–æ‹½æºï¼Œåªæœ‰ä½ æƒ³ä¸åˆ°çš„ï¼Œæ²¡æœ‰å®˜æ–¹åšä¸åˆ°çš„ï¼Œæ¥å§ï¼Œå¼€æ•´ã€‚</p>
</blockquote>
<p>åœ¨çº¿ä½“éªŒï¼ˆå›½å†…é•œåƒï¼‰ï¼š<a href="https://sxdpanda.gitee.io/antv-admin/#/antv/demo">https://sxdpanda.gitee.io/antv-admin/#/antv/demo</a> ï¼ˆgiteeçš„pagesæœåŠ¡å‡‰å‡‰äº†ï¼‰<br>
åœ¨çº¿ä½“éªŒï¼ˆå¤‡ç”¨åœ°å€ï¼‰ï¼š<a href="https://zlecheng.github.io/antv-page/#/home">https://zlecheng.github.io/antv-page/#/home</a></p>
<h4 id="å®˜æ–¹æä¾›çš„æ‹–æ‹½">å®˜æ–¹æä¾›çš„æ‹–æ‹½ </h4>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1685152369288-f5e295ee-44cc-4b0b-aa0b-0856a0701222.png#averageHue=%23bcdeb7&amp;clientId=u7af71f20-93b4-4&amp;from=paste&amp;height=194&amp;id=uec051bc4&amp;originHeight=381&amp;originWidth=623&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=17042&amp;status=done&amp;style=none&amp;taskId=ub63ed74d-1960-4c2c-bb90-a5ae185b0b9&amp;title=&amp;width=316.66668701171875" alt="image.png"></p>
<h4 id="è‡ªå®šä¹‰çš„æ‹–æ‹½">è‡ªå®šä¹‰çš„æ‹–æ‹½ </h4>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1686287334152-72d8d796-12a0-4562-afca-0156d10f099a.png#averageHue=%23fcfcfb&amp;clientId=u81e86784-6629-4&amp;from=paste&amp;height=198&amp;id=u0df6d612&amp;originHeight=579&amp;originWidth=1095&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=71322&amp;status=done&amp;style=none&amp;taskId=uc9327906-0a2d-4b62-8cba-42b71da9033&amp;title=&amp;width=374.66668701171875" alt="image.png"></p>
<h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ </h3>
<blockquote>
<p>è¿™é‡Œä½¿ç”¨çš„æ˜¯<a href="https://x6.antv.antgroup.com/tutorial/plugins/dnd">Dndæ’ä»¶</a>ï¼Œå› ä¸ºæˆ‘çœ‹å®˜æ–¹ä»‹ç»è¯´<a href="https://x6.antv.antgroup.com/tutorial/plugins/stencil">Stencil</a>æ’ä»¶å†…éƒ¨ä¹Ÿæ˜¯ä¾é Dndå®ç°çš„ï¼Œç´¢æ€§å°±ç›´æ¥ä½¿ç”¨Dndæ¥æå§</p>
</blockquote>
<h4 id="æ­¥éª¤1åˆå§‹åŒ–dnd">æ­¥éª¤1ï¼šåˆå§‹åŒ–Dnd </h4>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token comment">// å…¨å±€graphå˜é‡</span>
<span class="token keyword keyword-let">let</span> graph <span class="token operator">=</span> <span class="token keyword null nil keyword-null">null</span><span class="token punctuation">;</span>
<span class="token comment">// å…ˆå®šä¹‰ä¸ªå…¨å±€çš„dndå˜é‡</span>
<span class="token keyword keyword-let">let</span> dnd <span class="token operator">=</span> <span class="token keyword null nil keyword-null">null</span><span class="token punctuation">;</span>
<span class="token comment">// åœ¨mountedä¸­å¯¹dndè¿›è¡Œåˆå§‹åŒ–ï¼ˆåœ¨graphä¹‹ååˆå§‹åŒ–ï¼‰</span>
graph <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">container</span><span class="token operator">:</span> proxy<span class="token punctuation">.</span><span class="token property-access">$refs</span><span class="token punctuation">.</span><span class="token property-access">container</span><span class="token punctuation">,</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
  <span class="token spread operator">...</span>tempConfig  <span class="token comment">// è¿™ä¸ªæ˜¯æˆ‘çš„ç”»å¸ƒé…ç½®</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dnd <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Dnd</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">target</span><span class="token operator">:</span> graph<span class="token punctuation">,</span>
  <span class="token literal-property property">scaled</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">dndContainer</span><span class="token operator">:</span> proxy<span class="token punctuation">.</span><span class="token property-access">$refs</span><span class="token punctuation">.</span><span class="token property-access">dndContainer</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h4 id="æ­¥éª¤2å®šä¹‰æ‹–æ‹½äº‹ä»¶">æ­¥éª¤2ï¼šå®šä¹‰æ‹–æ‹½äº‹ä»¶ </h4>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token doc-comment comment">/**
 * è‡ªå®šä¹‰æ‹–æ‹½æºäº‹ä»¶
 * <span class="token keyword keyword-@param">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">e</span>
 * <span class="token keyword keyword-@param">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">treeNode</span> æ ¹æ®éœ€è¦ä¼ å…¥è¦æ·»åŠ çš„å‚æ•°
 * <span class="token keyword keyword-@param">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">data</span> æ ¹æ®éœ€è¦ä¼ å…¥è¦æ·»åŠ çš„å‚æ•°
 * è¿™é‡Œä½¿ç”¨çš„æ˜¯elementPlusçš„treeç»„ä»¶
 */</span>
<span class="token keyword keyword-const">const</span> <span class="token function-variable function">startDrag</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> treeNode<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'eee'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'treeNode'</span><span class="token punctuation">,</span> treeNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-const">const</span> node <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">createNode</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">shape</span><span class="token operator">:</span> <span class="token string">'cu-data-node'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">104</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> data<span class="token operator">?.</span>label<span class="token punctuation">,</span>
	<span class="token comment">// ä¼ é€’ç»™è‡ªå®šä¹‰èŠ‚ç‚¹çš„æ•°æ®</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">label</span><span class="token operator">:</span> data<span class="token operator">?.</span>label<span class="token punctuation">,</span>
      <span class="token literal-property property">img</span><span class="token operator">:</span> data<span class="token operator">?.</span>img<span class="token punctuation">,</span>
      <span class="token literal-property property">desc</span><span class="token operator">:</span> data<span class="token operator">?.</span>desc
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ports</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token spread operator">...</span>port<span class="token punctuation">,</span>
      <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">group</span><span class="token operator">:</span> <span class="token string">'top'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dnd<span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="æ­¥éª¤3è‡ªå®šä¹‰htmlèŠ‚ç‚¹">æ­¥éª¤3ï¼šè‡ªå®šä¹‰htmlèŠ‚ç‚¹ </h4>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>  <span class="token comment">// æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹ å›¾æ ‡+æ ‡é¢˜+æè¿°</span>
  <span class="token maybe-class-name">Shape</span><span class="token punctuation">.</span><span class="token constant">HTML</span><span class="token punctuation">.</span><span class="token method function property-access">register</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">shape</span><span class="token operator">:</span> <span class="token string">'cu-data-node'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">104</span><span class="token punctuation">,</span>
    <span class="token literal-property property">effect</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">html</span><span class="token punctuation">(</span><span class="token parameter">cell</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è·å–èŠ‚ç‚¹ä¼ é€’è¿‡æ¥çš„æ•°æ®</span>
      <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span> label<span class="token punctuation">,</span> img<span class="token punctuation">,</span> desc <span class="token punctuation">}</span> <span class="token operator">=</span> cell<span class="token punctuation">.</span><span class="token method function property-access">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// åˆ›å»ºè‡ªå®šä¹‰çš„èŠ‚ç‚¹å®¹å™¨</span>
      <span class="token keyword keyword-const">const</span> container <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      container<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'cu-container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// å›¾ç‰‡æ ¹æ®ä¸åŒçš„ç±»å‹è¿›è¡Œåˆ‡æ¢ï¼Œå¯ä»¥æ˜¯åç«¯è¿”å›çš„å›¾æ ‡ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå·±æœ¬åœ°çš„å›¾æ ‡ï¼Œå¦‚æœæ˜¯åç«¯è¿”å›å°±é€šè¿‡èŠ‚ç‚¹çš„dataä¼ è¿›æ¥</span>
      <span class="token keyword keyword-const">const</span> container_img <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      container_img<span class="token punctuation">.</span><span class="token property-access">src</span> <span class="token operator">=</span> currentTab<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'/src/assets/images/operator/datasouce.png'</span> <span class="token operator">:</span> img<span class="token punctuation">;</span>
      container_img<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'cu-container-img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


      <span class="token keyword keyword-const">const</span> container_title <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      container_title<span class="token punctuation">.</span><span class="token property-access">innerText</span> <span class="token operator">=</span> label<span class="token punctuation">;</span>
      container_title<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'cu-container-title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


      <span class="token keyword keyword-const">const</span> container_desc <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      container_desc<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'cu-container-desc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      container_desc<span class="token punctuation">.</span><span class="token property-access">innerText</span> <span class="token operator">=</span> desc <span class="token operator">||</span> <span class="token string">'æè¿°ä¿¡æ¯'</span><span class="token punctuation">;</span>


      container<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>container_img<span class="token punctuation">)</span><span class="token punctuation">;</span>
      container<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>container_title<span class="token punctuation">)</span><span class="token punctuation">;</span>
      container<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>container_desc<span class="token punctuation">)</span><span class="token punctuation">;</span>


      <span class="token keyword control-flow keyword-return">return</span> container<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h4 id="æ­¥éª¤4å…ƒç´ ç»‘å®šæ‹–æ‹½äº‹ä»¶">æ­¥éª¤4ï¼šå…ƒç´ ç»‘å®šæ‹–æ‹½äº‹ä»¶ </h4>
<pre data-role="codeBlock" data-info="html" class="language-html html"><code><span class="token comment">&lt;!-- $eventå¿…ä¼ ï¼Œåé¢çš„å‚æ•°æ ¹æ®ä½ çš„ä¸šåŠ¡éœ€æ±‚åŠ¨æ€æ·»åŠ  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>  <span class="token attr-name">@mousedown</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>startDrag($event, node, data)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>æ‹–æ‹½çš„èŠ‚ç‚¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><hr>
<h2 id="ï¸--æ¡†é€‰å®Œæˆåæ·»åŠ å³é”®èœå•">ğŸ–¼ï¸ | æ¡†é€‰å®Œæˆåæ·»åŠ å³é”®èœå•ï¼Ÿ </h2>
<blockquote>
<p>ä»Šå¤©åœ¨ç¾¤é‡Œæœ‰ä¸ªå°ä¼™ä¼´æå‡ºäº†è¿™ä¹ˆä¸ªé—®é¢˜ï¼šå¦‚ä½•åœ¨æ¡†é€‰å®Œæˆåç»™æ¡†é€‰çš„åŒºåŸŸæ·»åŠ ä¸€ä¸ªå³é”®èœå•çš„åŠŸèƒ½ï¼Œæˆ‘çœ‹åˆ°äº†è¿™ä¸ªé—®é¢˜åä¹Ÿæ˜¯æœ‰ç‚¹æ‡µï¼Œå¿ƒé‡Œæƒ³ç€æ€ä¹ˆè¿˜æœ‰è¿™ä¸ªéœ€æ±‚ï¼Œç›´æ¥å¿«æ·é”®åˆ é™¤ä¸æ˜¯æ›´å¥½å—ï¼Œè°çŸ¥è¿™ä½å°ä¼™ä¼´ä¹Ÿæ˜¯è¿™ä¹ˆå†™çš„ï¼Œå¥ˆä½•å®¢æˆ·è¦æ·»åŠ å³é”®èœå•çš„åŠŸèƒ½ï¼Œæ‰€ä»¥è¯´ï¼Œå®¢æˆ·æœ€å¤§ã€‚æ—¢ç„¶äººå®¶éƒ½æå‡ºè¿™ä¸ªéœ€æ±‚å‘¢ï¼Œé‚£å°±è¯´æ˜å¤§æ¦‚ç‡æƒ…å†µä¸‹æ˜¯å¯ä»¥åšçš„ï¼Œåªæ˜¯çœ‹è‡ªå·±æƒ³ä¸æƒ³åšäº†ï¼Œä¸‹é¢æˆ‘å…ˆæ¥åˆ†æä¸‹æˆ‘çš„æ€è·¯ï¼Œä»…ä¾›å‚è€ƒï¼Œä¸è¿‡è¿™ä¸ªæ–¹æ¡ˆåº”è¯¥æ˜¯èƒ½è§£å†³å¤§éƒ¨åˆ†çš„ä¸šåŠ¡åœºæ™¯äº†</p>
</blockquote>
<h3 id="é—®é¢˜åˆ†æ">é—®é¢˜åˆ†æ </h3>
<ol>
<li>æ¡†é€‰å®Œæˆï¼Ÿé‚£å°±ç›‘å¬æ¡†é€‰å®Œæˆçš„äº‹ä»¶ï¼Œè¿™ä¸ªå®˜æ–¹æ˜¯æœ‰å¯¹åº”çš„äº‹ä»¶çš„</li>
<li>æ¡†é€‰å®Œæˆæ‰ä¼šè§¦å‘å³é”®ï¼Ÿä¹Ÿå°±æ˜¯è¯´ä¸æ¡†é€‰æ˜¯ä¸èƒ½è§¦å‘å³é”®äº‹ä»¶çš„</li>
<li>å³ä½¿å‰é¢ä¸¤ä¸ªæ­¥éª¤éƒ½è§£å†³äº†ï¼Œé‚£æˆ‘è¿™ä¸ªèœå•åæ ‡æ€ä¹ˆç¡®å®šï¼Ÿç¬¬ä¸€ä¸ªæƒ³åˆ°æ˜¯æ¡†é€‰çš„æ—¶å€™ä¼šæœ‰å·¦å³çš„è¾¹ç•Œï¼Œå°±åƒå¦‚å›¾è¿™æ ·ï¼Œæˆ‘æ˜¯å¦å¯ä»¥æ ¹æ®è¿™ä¸¤ä¸ªè¾¹ç•ŒèŠ‚ç‚¹çš„åæ ‡å»åŠ¨æ€è®¡ç®—ï¼Ÿç¬¬äºŒä¸ªæ–¹æ³•å°±æ˜¯ä¸åŠ å³é”®çš„åŠŸèƒ½ï¼Œç›´æ¥åœ¨æ¡†é€‰çš„å®¹å™¨çš„å³ä¸Šè§’æ·»åŠ ä¸€ä¸ªdomï¼ŒæŠŠæ“ä½œæŒ‰é’®æ”¾åœ¨è¿™é‡Œé¢ï¼Œé€šè¿‡é¼ æ ‡åˆ’å…¥æ¥æ§åˆ¶æ˜¾ç¤ºå’Œéšè—</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1687353577433-76cd22ea-8c7d-49bc-b266-891a12c1b1d1.png#averageHue=%23fcf8f6&amp;clientId=ucaca3209-d030-4&amp;from=paste&amp;height=325&amp;id=u52019b66&amp;originHeight=325&amp;originWidth=581&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=24065&amp;status=done&amp;style=none&amp;taskId=uc74c9fec-efa1-4ffa-a180-19847d0e2bb&amp;title=&amp;width=581" alt="image.png"></p>
<ol start="4">
<li>ä½†æ˜¯ä»å…¨å±€çš„è§’åº¦åˆ†æäº†ä¸‹ï¼Œå‘ç°ç¬¬ä¸‰ä¸ªæ­¥éª¤å¤æ‚åº¦æœ‰ç‚¹å¤§ï¼Œä¸æ˜¯è¯´ä¸èƒ½å®ç°ï¼Œè€Œæ˜¯æ²¡æœ‰å¿…è¦è¿™ä¹ˆåšï¼›å°±åƒä½ å»è·‘800ç±³ï¼Œæ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯è´´ç€æœ€å†…é“è·‘ï¼Œè€Œä½ éè¦åœ¨æœ€å¤–é“è·‘ã€‚è€Œä¸”æ²¡æœ‰æ·»åŠ å³é”®è¿™ä¸ªæ“ä½œï¼Œä¸å°±æ»¡è¶³ä¸äº†éœ€æ±‚äº†å—ã€‚</li>
<li>ç»è¿‡ä¸€è½®åˆ†æåï¼Œå†³å®šè¿˜æ˜¯æ¥ç©ç©domæ“ä½œï¼Œå› ä¸ºåªæœ‰domæ˜¯ä¸€ç›´ä¸å˜çš„ï¼Œå˜çš„åªæ˜¯æ˜¾ç¤ºéšè—è€Œå·²ï¼Œä»ç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥è·å–åˆ°æ¡†é€‰è¿™ä¸ªå®¹å™¨çš„domå®ä¾‹çš„ï¼Œç„¶åå†æ ¹æ®è¿™ä¸ªdomå®ä¾‹å»è§¦å‘å³é”®çš„äº‹ä»¶ï¼Œç„¶åæˆ‘åœ¨è¿™ä¸ªå³é”®é‡Œé¢æ·»åŠ æˆ‘çš„ä¸šåŠ¡æ“ä½œä¸å°±è¡Œäº†å—ï¼Ÿå¼€å¹²å§ï¼</li>
</ol>
<h3 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³• </h3>
<h4 id="æ­¥éª¤1">æ­¥éª¤1 </h4>
<p>è¿™é‡Œä¸ºäº†ä¿é™©èµ·è§ï¼Œæˆ‘ç»™æ¡†é€‰æ’ä»¶çš„é…ç½®é¡¹æ·»åŠ äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„classç±»åï¼Œæˆ‘å¯ä»¥æ ¹æ®æˆ‘è¿™ä¸ªå”¯ä¸€çš„classå»è·å–æ¡†é€‰çš„å®¹å™¨<br>
<img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1687353742608-5f759ac8-1e7c-44d0-b7c0-26fc56b4e044.png#averageHue=%23252931&amp;clientId=ucaca3209-d030-4&amp;from=paste&amp;height=175&amp;id=uc6f19fee&amp;originHeight=175&amp;originWidth=415&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=true&amp;size=9205&amp;status=done&amp;style=none&amp;taskId=ud5c51f1f-b75f-456b-a28f-9b48610b847&amp;title=%E9%85%8D%E7%BD%AE%E9%A1%B9%E5%8F%82%E8%80%83&amp;width=415" alt="é…ç½®é¡¹å‚è€ƒ" title="é…ç½®é¡¹å‚è€ƒ"></p>
<h4 id="æ­¥éª¤äºŒ">æ­¥éª¤äºŒ </h4>
<p>å¼€å§‹ç©domï¼Œå…ˆè·å–åˆ°æˆ‘è‡ªå®šä¹‰çš„è¿™ä¸ªclassï¼Œç„¶åå†æ ¹æ®è¿™ä¸ªçˆ¶çº§å»è·å–çœŸæ­£çš„æ¡†é€‰å®¹å™¨ï¼ˆæ¡†é€‰å®¹å™¨çš„classéœ€è¦è‡ªè¡Œæ‰“å¼€æµè§ˆå™¨çš„f12å»æ‰¾å“ˆï¼‰</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token comment">// æˆ‘è‡ªå®šä¹‰çš„class</span>
<span class="token keyword keyword-const">const</span> parent <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'cu-selected-container'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// æ¡†é€‰çš„å®¹å™¨</span>
<span class="token keyword keyword-const">const</span> selectInner <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token method function property-access">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'x6-widget-selection-inner'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// æ‰“å°ä¸‹çœ‹æ˜¯ä¸ªå•¥</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'seleeeee &gt;&gt;&gt;'</span><span class="token punctuation">,</span> selectInner<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>æ²¡é”™äº†ï¼Œæˆ‘è·å–åˆ°äº†ï¼Œçœ‹ä¸‹å›¾<br>
<img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1687354009696-1dd9ec92-4b14-4a73-95d3-c4620ae2c506.png#averageHue=%232d333b&amp;clientId=ucaca3209-d030-4&amp;from=paste&amp;height=82&amp;id=u2dc6078e&amp;originHeight=82&amp;originWidth=629&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=10480&amp;status=done&amp;style=none&amp;taskId=u210f4b84-f4d9-4170-a29c-0fe6c223174&amp;title=&amp;width=629" alt="image.png"></p>
<h4 id="æ­¥éª¤ä¸‰">æ­¥éª¤ä¸‰ </h4>
<p>ç»è¿‡å‰é¢ä¸¤ä¸ªæ­¥éª¤çš„å¤„ç†ï¼Œæ­¥éª¤ä¸‰å°±è½»æ¾å¤šäº†ï¼Œæ­¥éª¤ä¸‰ä¸»è¦åšçš„äº‹æƒ…å°±æ˜¯ç›‘å¬æ¡†é€‰å®Œæˆçš„äº‹ä»¶ï¼Œçœ‹è¿‡å®˜ç½‘çš„å°ä¼™ä¼´éƒ½çŸ¥é“ï¼Œå®˜æ–¹å¤§å¤§ç»™æˆ‘ä»¬æä¾›çš„äº‹ä»¶è¿˜æ˜¯æŒºå¤šçš„<a href="https://x6.antv.antgroup.com/tutorial/plugins/selection#%E9%85%8D%E7%BD%AE">äº‹ä»¶</a>ï¼Œé‚£å°ä¼™ä¼´åœ¨è¿™é‡Œå¯èƒ½å°±çŠ¯å˜€å’•äº†ï¼Œæˆ‘åˆ°åº•è¯¥ç”¨å“ªä¸ªå‘¢ï¼Ÿå…¶å®å§ï¼Œæˆ‘è§‰å¾—è¿™é‡Œç”¨å“ªä¸ªäº‹ä»¶æ›´å¤šå–å†³ä½ çš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘è¿™é‡Œä¸ºäº†èŠ‚çº¦æ—¶é—´ï¼Œå°±ç›´æ¥ä½¿ç”¨<code>selection:changed</code>è¿™ä¸ªäº‹ä»¶äº†ã€‚<br>
:::warning<br>
Tipï¼šå¦‚æœä½ æ¡†é€‰çš„èŠ‚ç‚¹ä¸ªæ•°æ˜¯0çš„è¯éœ€è¦ç‰¹æ®Šå¤„ç†ä¸‹ï¼Œä¸ç„¶æ§åˆ¶å°ä¼šæŠ¥æ¡†é€‰çš„å®¹å™¨ä¸å­˜åœ¨ï¼Œæˆ‘è¿™é‡Œæ˜¯æ ¹æ®selectedçš„é•¿åº¦è¿›è¡Œåˆ¤æ–­ï¼Œä¸æ»¡è¶³æ¡ä»¶ç›´æ¥æå‰è¿”å›<br>
:::</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'selection:changed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> selected <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>selected<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword control-flow keyword-return">return</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-const">const</span> parent <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'cu-selected-container'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-const">const</span> selectInner <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token method function property-access">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'x6-widget-selection-inner'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  selectInner<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">pointerEvents</span> <span class="token operator">=</span> <span class="token string">'unset'</span><span class="token punctuation">;</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'seleeeee &gt;&gt;&gt;'</span><span class="token punctuation">,</span> selectInner<span class="token punctuation">)</span><span class="token punctuation">;</span>
 selectInner<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'contextmenu'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>æœ€åå†çœ‹ä¸‹æ•ˆæœå§ï¼Œèœå•çš„å†…å®¹åé¢æˆ‘å†æ›´æ–°å§â€¦â€¦<br>
<img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1687354818640-1738e628-0392-47f1-a891-49fca4937277.png#averageHue=%23e6e5e5&amp;clientId=ucaca3209-d030-4&amp;from=paste&amp;height=361&amp;id=ua99f3458&amp;originHeight=664&amp;originWidth=716&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=32021&amp;status=done&amp;style=none&amp;taskId=u258496bb-fe68-4f25-b13d-de084a65820&amp;title=&amp;width=389" alt="image.png"></p>
<h4 id="æ­¥éª¤å››">æ­¥éª¤å›› </h4>
<p>åŸä»¥ä¸ºåˆ°ç¬¬ä¸‰ä¸ªæ­¥éª¤å°±ç»“æŸäº†ï¼Œæ²¡æƒ³åˆ°è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä¸€ç›´å»æ¡†é€‰ï¼Œä½†æ˜¯è¿™æœŸé—´æˆ‘ä¸å»è§¦å‘å³å‡»äº‹ä»¶ï¼Œç›´åˆ°æœ€åæˆ‘å†å³é”®ï¼Œè¿™æ—¶ä½ å†å»ç‚¹å‡»alertçš„ç¡®å®šæŒ‰é’®ä¼šå‘ç°å®Œå…¨å…³ä¸æ‰ï¼Œæˆ‘æƒ³ç€å®Œäº†å®Œäº†ï¼Œæ˜¯ä¸æ˜¯è¿›å…¥æ­»å¾ªç¯äº†ï¼Ÿäºæ˜¯æˆ‘å°±å¤šå®éªŒäº†å‡ æ¬¡ï¼Œå‘ç°è¿™ä¸ªalertçš„æ¬¡æ•°æ˜¯å’Œæˆ‘æ¡†é€‰çš„æ¬¡æ•°æ˜¯æœ‰å…³è”çš„ï¼Œäºæ˜¯å°±åœ¨æƒ³æ˜¯å“ªé‡Œé™¤äº†é—®é¢˜ï¼Œç»è¿‡ä¸€ç•ªæ’æŸ¥åå‘ç°æ˜¯äº‹ä»¶çš„é—®é¢˜ï¼Œå¥½åƒæ˜¯æ¯æ¬¡æ¡†é€‰å®Œåæ²¡æœ‰æ¸…ç©ºæ‰domï¼Œäºæ˜¯æˆ‘å°±ä»äº‹ä»¶è¿™é‡Œä¸‹æ‰‹è§£å†³ï¼Œå†³å®šåœ¨è§¦å‘å³é”®èœå•ä¹‹å‰å…ˆç§»é™¤ä¸€ä¸‹å³é”®çš„äº‹ä»¶ï¼ˆæ’ä»–æ³•ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰ï¼Œå…ˆæ¸…ç©ºå†è¯´ï¼‰ï¼Œæœç„¶é—®é¢˜å¾—åˆ°äº†å®Œç¾çš„è§£å†³</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-const">const</span> <span class="token function-variable function">handleContextMenu</span> <span class="token operator">=</span> <span class="token parameter">event</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'selection:changed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> selected <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>selected<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword control-flow keyword-return">return</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-const">const</span> parent <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'cu-selected-container'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-const">const</span> selectInner <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token method function property-access">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'x6-widget-selection-inner'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  selectInner<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">pointerEvents</span> <span class="token operator">=</span> <span class="token string">'unset'</span><span class="token punctuation">;</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'seleeeee &gt;&gt;&gt;'</span><span class="token punctuation">,</span> selectInner<span class="token punctuation">)</span><span class="token punctuation">;</span>
  selectInner<span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'contextmenu'</span><span class="token punctuation">,</span> handleContextMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>
  selectInner<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'contextmenu'</span><span class="token punctuation">,</span> handleContextMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="æ€»ç»“">æ€»ç»“ </h3>
<p>é—®é¢˜åˆ†æå¾ˆå…³é”®ï¼Œä»£ç åªæ˜¯ä¸ªå·¥å…·ï¼Œå…·ä½“æ€ä¹ˆèµ°è¿˜æ˜¯è¦æˆ‘ä»¬è‡ªå·±å»åˆ¶å®šï¼Œæ‰€ä»¥åœ¨è¿™ä¸€è¡Œå¾…çš„æ—¶é—´ä¹…äº†ï¼Œä½ ä¼šå‘ç°åˆ†æé—®é¢˜å’Œå…³é”®æ—¶åˆ»è§£å†³é—®é¢˜çš„èƒ½åŠ›æ˜¯æœ‰å¤šé‡è¦ã€‚é¡ºä¾¿è®²ä¸€ä¸‹è¿™ä¸ªå°åŠŸèƒ½æˆ‘ä¹Ÿæ˜¯è¶ç€ä¸‹ç­å‰15åˆ†é’Ÿæå‡ºæ¥çš„ï¼Œå¦‚æœæˆ‘ç›´æ¥è·³è¿‡åˆ†æé—®é¢˜çš„æ­¥éª¤ï¼Œæˆ‘ä¼°è®¡åˆ°èŠ‚åä¹Ÿä¸ä¸€å®šèƒ½æƒ³åˆ°è§£å†³æ–¹æ¡ˆã€‚å¥½äº†ï¼Œè¿™ä¸ªå°é—®é¢˜çš„æ€»ç»“å°±åˆ°è¿™å§ï¼Œæœ‰ç©ºå†æ›´æ–°èœå•åæ ‡çš„é—®é¢˜çš„è§£å†³æ€è·¯å§ã€‚ğŸ˜œdemoä¹ŸåŒæ­¥æ›´æ–°äº†ï¼Œæƒ³çœ‹æ•ˆæœçš„å¯ä»¥ç›´æ¥çœ‹ <a href="https://sxdpanda.gitee.io/antv-admin/#/antv/demo">å›½å†…é•œåƒ</a> /  <a href="https://zlecheng.github.io/antv-page/#/home">å¤‡ç”¨åœ°å€</a></p>
<h2 id="ï¸--ç‚¹å‡»èŠ‚ç‚¹æ¸…ç©ºæ¡†é€‰çš„é€‰åŒº">ğŸ–¼ï¸ | ç‚¹å‡»èŠ‚ç‚¹æ¸…ç©ºæ¡†é€‰çš„é€‰åŒº </h2>
<p>å…ˆçœ‹çœ‹é—®é¢˜å›¾ç‰‡ï¼Œåœ¨ç‚¹å‡»èŠ‚ç‚¹çš„æ—¶å€™ä¼šå‡ºç°è¿™ä¹ˆä¸ªç©æ„ï¼Œä½†æ˜¯æˆ‘æƒ³è¦çš„æ•ˆæœæ˜¯ç‚¹å‡»çš„æ—¶å€™ä¸æ˜¾ç¤ºï¼Œåªæœ‰åœ¨æ¡†é€‰çš„æ—¶å€™æ‰ä¼šå»æ˜¾ç¤ºé€‰åŒº<br>
<img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1687064700490-c5fe2402-04f2-4495-a0e7-ea57e66d3d38.png#averageHue=%237e7e7d&amp;clientId=u28121ce6-f5c8-4&amp;from=paste&amp;height=348&amp;id=u0fa13c10&amp;originHeight=348&amp;originWidth=463&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=9011&amp;status=done&amp;style=none&amp;taskId=u190dd9f8-b11d-429f-9ef1-b081d02a68e&amp;title=&amp;width=463" alt="image.png"></p>
<h3 id="è§£å†³æ–¹æ³•-1">è§£å†³æ–¹æ³• </h3>
<p>ç‚¹å‡»èŠ‚ç‚¹çš„æ—¶å€™æ¸…ç©ºæ‰é€‰æ‹©çš„é€‰åŒºï¼Œè¿™è¿™æ ·å­å°±æ²¡æœ‰é—®é¢˜äº†</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>  graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'node:click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> node <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    graph<span class="token punctuation">.</span><span class="token method function property-access">cleanSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><hr>
<h2 id="ï¸--ä½¿ç”¨é”®ç›˜æ–¹å‘é”®æ§åˆ¶èŠ‚ç‚¹çš„ç§»åŠ¨">ğŸ–¼ï¸ | ä½¿ç”¨é”®ç›˜æ–¹å‘é”®æ§åˆ¶èŠ‚ç‚¹çš„ç§»åŠ¨ </h2>
<blockquote>
<p>é¦–å…ˆéœ€è¦äº†è§£çš„çŸ¥è¯†ç‚¹æ˜¯jsçš„é”®ç›˜äº‹ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½åªè€ƒè™‘æ–¹å‘é”®çš„è§¦å‘æ—¶æœºï¼Œè¿˜è¦è€ƒè™‘é”®ç›˜æ˜¯å¦æ˜¯æŒ‰ä¸‹çš„çŠ¶æ€</p>
</blockquote>
<h3 id="æ­¥éª¤1-1">æ­¥éª¤1 </h3>
<p>å‡†å¤‡ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåœ¨åˆ›å»ºèŠ‚ç‚¹çš„æ—¶å€™æŠŠèŠ‚ç‚¹å­˜å‚¨åˆ°ä¸€ä¸ªå…¨å±€å˜é‡ä¸­ï¼Œæ–¹ä¾¿åç»­è·å–èŠ‚ç‚¹çš„ä½ç½®</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-let">let</span> testNode <span class="token operator">=</span> <span class="token keyword null nil keyword-null">null</span><span class="token punctuation">;</span>
  <span class="token comment">// å°†èŠ‚ç‚¹æ·»åŠ åˆ°ç”»å¸ƒä¸­</span>
  testNode <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">addNode</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">shape</span><span class="token operator">:</span> <span class="token string">"circle"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"çŸ©å½¢"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">attrs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">"#fff"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">stroke</span><span class="token operator">:</span> <span class="token string">"#007aff"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">strokeWidth</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">refX</span><span class="token operator">:</span> <span class="token string">"0.5"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">refY</span><span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">refY2</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token literal-property property">textAnchor</span><span class="token operator">:</span> <span class="token string">"middle"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">textVerticalAnchor</span><span class="token operator">:</span> <span class="token string">"top"</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="æ­¥éª¤äºŒ-1">æ­¥éª¤äºŒ </h3>
<p>å‡†å¤‡ä¸€ä¸ªå¼€å…³æŒ‰é’®ï¼Œç”¨äºå¼€å¯èŠ‚ç‚¹çš„ç§»åŠ¨ï¼Œå¦‚æœä¸å­˜åœ¨èŠ‚ç‚¹ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç›´æ¥æå‰returnï¼›ç„¶åæˆ‘ä»¬ç»™é”®ç›˜æ·»åŠ ç›‘å¬äº‹ä»¶ï¼Œåˆ¤æ–­å››ä¸ªæ–¹å‘é”®å¯¹åº”çš„keyCodeï¼Œæœ€åå†é€šè¿‡<code>node.position()</code>è¿™ä¸ªapiè®¾ç½®èŠ‚ç‚¹çš„ç§»åŠ¨æ­¥å¹…</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-const">const</span> <span class="token function-variable function">handleMove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>testNode<span class="token punctuation">)</span> <span class="token keyword control-flow keyword-return">return</span><span class="token punctuation">;</span>
  <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">"keydown"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-const">const</span> keyCode <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token property-access">keyCode</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> position <span class="token operator">=</span> testNode<span class="token punctuation">.</span><span class="token method function property-access">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow keyword-switch">switch</span> <span class="token punctuation">(</span>keyCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword keyword-case">case</span> <span class="token number">37</span><span class="token operator">:</span> <span class="token comment">// left arrow</span>
        testNode<span class="token punctuation">.</span><span class="token method function property-access">position</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span><span class="token property-access">x</span> <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">,</span> position<span class="token punctuation">.</span><span class="token property-access">y</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow keyword-break">break</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-case">case</span> <span class="token number">38</span><span class="token operator">:</span> <span class="token comment">// up arrow</span>
        testNode<span class="token punctuation">.</span><span class="token method function property-access">position</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">,</span> position<span class="token punctuation">.</span><span class="token property-access">y</span> <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow keyword-break">break</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-case">case</span> <span class="token number">39</span><span class="token operator">:</span> <span class="token comment">// right arrow</span>
        testNode<span class="token punctuation">.</span><span class="token method function property-access">position</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span><span class="token property-access">x</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">,</span> position<span class="token punctuation">.</span><span class="token property-access">y</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow keyword-break">break</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-case">case</span> <span class="token number">40</span><span class="token operator">:</span> <span class="token comment">// down arrow</span>
        testNode<span class="token punctuation">.</span><span class="token method function property-access">position</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">,</span> position<span class="token punctuation">.</span><span class="token property-access">y</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow keyword-break">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><hr>
<h2 id="ï¸--è‡ªå®šä¹‰htmlèŠ‚ç‚¹é¼ æ ‡ç§»å…¥èŒƒå›´é—®é¢˜">ğŸ–¼ï¸ | è‡ªå®šä¹‰htmlèŠ‚ç‚¹é¼ æ ‡ç§»å…¥èŒƒå›´é—®é¢˜ </h2>
<blockquote>
<p>ä»Šå¤©åœ¨æè‡ªå®šä¹‰æ‹–æ‹½å’Œé¼ æ ‡ç§»å…¥èŠ‚ç‚¹æ˜¾ç¤ºè¿æ¥æ¡©çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„æ­¥éª¤éƒ½æ˜¯æŒ‰ç…§å®˜ç½‘çš„demoæ¥èµ°çš„ï¼Œä»£ç ä¹Ÿæ˜¯å…¨éƒ¨å¤åˆ¶çš„å®˜ç½‘çš„ï¼Œåªæœ‰htmlèŠ‚ç‚¹é‚£é‡Œæ˜¯æ‰‹åŠ¨å†™çš„ï¼Œè¿™ä¸ªä¸œè¥¿æœ¬æ¥å¦‚æœä¸å‡ºé”™çš„è¯10æ¥åˆ†é’Ÿå°±èƒ½å†™å®Œäº†ï¼Œè°çŸ¥é“å°±è¿™ä¸ªå°ä¸œè¥¿ç«Ÿç„¶æäº†æˆ‘åŠä¸ªå¤šå°æ—¶ï¼Œæƒ³æƒ³éƒ½æ°”äººâ€¦â€¦</p>
</blockquote>
<h3 id="åœºæ™¯">åœºæ™¯ </h3>
<blockquote>
<p>åœ¨é¼ æ ‡ç§»å…¥èŠ‚ç‚¹çš„æ—¶å€™æ˜¾ç¤ºèŠ‚ç‚¹ä¸Šçš„è¿æ¥æ¡©ï¼Œé¼ æ ‡ç¦»å¼€èŠ‚ç‚¹å°±éšè—è¿æ¥æ¡©ã€‚ä½†æ˜¯æˆ‘å‘ç°åœ¨é¼ æ ‡ç§»å…¥èŠ‚ç‚¹ä¸‹æ–¹ï¼ˆä¸€ç›´åˆ°ç”»å¸ƒå¯è§†åŒºåŸŸå†…è¿™æ®µè·ç¦»ï¼‰éƒ½èƒ½è§¦å‘é¼ æ ‡ç§»å…¥äº‹ä»¶ã€‚</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1686295776297-fcab0a10-db78-48d9-b85e-f234c4ccb0d7.png#averageHue=%23fcf5f4&amp;clientId=u5b3db1d9-5f41-4&amp;from=paste&amp;height=409&amp;id=u5383d9a9&amp;originHeight=613&amp;originWidth=322&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=13353&amp;status=done&amp;style=none&amp;taskId=u7f903004-80b5-4e95-8f8a-6471dce2d09&amp;title=&amp;width=214.66666666666666" alt="image.png"></p>
<h3 id="é—®é¢˜åˆ†æ-1">é—®é¢˜åˆ†æ </h3>
<ul>
<li>è‡ªå®šä¹‰çš„htmlèŠ‚ç‚¹æœªè®¾ç½®å®½é«˜ï¼Œç»„ä»¶é»˜è®¤å°±ç»™äº†100%ï¼Ÿï¼Œå¾ˆæ˜¾ç„¶æˆ‘å¹¶æ²¡æœ‰çŠ¯è¿™ä¹ˆä½çº§çš„é”™è¯¯â€¦â€¦</li>
<li>åˆ›å»ºdomçš„é—®é¢˜ï¼Ÿå—¯ï¼Œä¹Ÿä¸æ˜¯â€¦â€¦</li>
<li>å®˜æ–¹bugï¼Ÿæœç„¶æˆ‘é€šè¿‡å®¡æŸ¥å…ƒç´ å‘ç°äº†è¿™ä¸ªç©æ„ï¼Œåªè¦æŠŠå®ƒå®½é«˜çš„100%å»æ‰å°±å¯ä»¥äº†,ä½†æ˜¯ç»è¿‡ä¸€ç•ªæ“ä½œåï¼Œå‘ç°å¹¶ä¸æ˜¯è¿™ä¸ªé—®é¢˜å¯¼è‡´çš„ï¼Œå¥½å§ï¼Œæ‰¾äº†ä¸ªå¯‚å¯ï¼Œç»§ç»­æ‰¾â€¦â€¦</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1686296057465-c412b702-4fe9-45c6-a1d9-fa885bc81442.png#averageHue=%232e2b2a&amp;clientId=u5b3db1d9-5f41-4&amp;from=paste&amp;height=166&amp;id=ud87d963e&amp;originHeight=249&amp;originWidth=744&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=44683&amp;status=done&amp;style=none&amp;taskId=uc676cb6d-4968-4cb4-a430-cec1ea6ee0a&amp;title=&amp;width=496" alt="image.png"></p>
<ul>
<li>æ ·å¼é—®é¢˜ï¼šä¸€å®šæ˜¯æˆ‘è¿™ä¸ªé¡¹ç›®é‡Œé¢å“ªä¸ªæ ·å¼å½±å“åˆ°äº†x6ï¼Œç»è¿‡å¯¹å…¨å±€æ ·å¼çš„ä¸€è¡Œè¡Œåˆ å‡ï¼Œç»ˆäºæ‰¾åˆ°äº†é—®é¢˜æ‰€åœ¨ï¼Œç½ªé­ç¥¸é¦–ç«Ÿç„¶æ˜¯viteï¼Œå› ä¸ºæˆ‘è¿™ä¸ªé¡¹ç›®æ˜¯ç”¨viteåˆ›å»ºçš„ï¼Œæ‰€ä»¥é‡Œé¢çš„æ ·å¼æœ‰ä¸€éƒ¨åˆ†æ˜¯viteåˆ›å»ºçš„æ—¶å€™é»˜è®¤ç”Ÿæˆçš„ï¼Œå®ƒæŠŠbodyçš„å®½é«˜éƒ½è®¾ç½®æˆå›ºå®šå€¼äº†ï¼Œè€Œä¸”bodyçš„é«˜åº¦è¿˜æ˜¯100vhï¼Œå“ï¼ŒçœŸæ˜¯æœäº†è¿™ä¸ªè€å…­äº†ï¼Œè—å¾—å¤ªæ·±äº†</li>
</ul>
<h3 id="è§£å†³æ–¹æ³•-2">è§£å†³æ–¹æ³• </h3>
<p>æŠŠbodyçš„å®½é«˜è®¾ç½®æˆ100%å°±å¯ä»¥äº†</p>
<hr>
<h2 id="ï¸--è‡ªå®šä¹‰è¾¹çš„labelç‚¹å‡»labelè§¦å‘è¾¹çš„ç‚¹å‡»äº‹ä»¶é—®é¢˜">ğŸ–¼ï¸ | è‡ªå®šä¹‰è¾¹çš„labelï¼Œç‚¹å‡»labelè§¦å‘è¾¹çš„ç‚¹å‡»äº‹ä»¶é—®é¢˜ </h2>
<blockquote>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå‡ºç°è¿™ç§é—®é¢˜åŸºæœ¬ä¸Šæ˜¯å› ä¸ºäº‹ä»¶å†’æ³¡å¯¼è‡´çš„ï¼Œæ‰€ä»¥è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ³•ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œé˜»æ­¢äº‹ä»¶ä¼ æ’­å°±è¡Œäº†</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1686878699218-82235f64-093a-4670-bdc6-91cc221a6040.png#averageHue=%23fdfbf8&amp;clientId=ucd1721ea-30c5-4&amp;from=paste&amp;height=190&amp;id=u780ab455&amp;originHeight=285&amp;originWidth=677&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=13044&amp;status=done&amp;style=none&amp;taskId=u324ee651-ad7b-4fab-b7fd-3ffd5e64268&amp;title=&amp;width=451.3333333333333" alt="image.png"></p>
<h3 id="è§£å†³æ–¹æ³•-3">è§£å†³æ–¹æ³• </h3>
<p><a href="https://antv-x6.gitee.io/zh/docs/tutorial/intermediate/events/#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6">äº‹ä»¶ç³»ç»Ÿ</a><br>
<a href="https://x6.antv.antgroup.com/examples/edge/label/#render-with-html">demo</a></p>
<ul>
<li>ç»™è¾¹æ·»åŠ è‡ªå®šä¹‰ç‚¹å‡»äº‹ä»¶</li>
</ul>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">addEdge</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">"edge:click"</span><span class="token punctuation">,</span>
     â€¦â€¦
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><ul>
<li>ç›‘å¬è‡ªå®šä¹‰ç‚¹å‡»äº‹ä»¶ï¼Œé˜»æ­¢äº‹ä»¶ä¼ æ’­</li>
</ul>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">"edge:customevent"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> view<span class="token punctuation">,</span> e <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">"edge:click"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token method function property-access">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>å¥½äº†ï¼Œåˆ°è¿™é‡Œçš„è¯è¯´æ˜æˆ‘ä»¬å·²ç»æˆåŠŸé˜»æ­¢äº‹ä»¶ä¼ æ’­äº†ï¼Œåœ¨ç‚¹å‡»labelçš„æ—¶å€™å°±ä¸ä¼šå†è§¦å‘è¾¹çš„ç‚¹å‡»äº‹ä»¶äº†</p>
<hr>
<h2 id="ï¸--æœ¬åœ°å›¾ç‰‡å¯¼å‡ºåä¸æ˜¾ç¤º">ğŸ–¼ï¸ | æœ¬åœ°å›¾ç‰‡å¯¼å‡ºåä¸æ˜¾ç¤ºï¼Ÿ </h2>
<p>å…ˆçœ‹çœ‹å®˜æ–¹çš„å¯¼å‡ºæ–‡æ¡£ï¼š<br>
<a href="https://x6.antv.antgroup.com/tutorial/plugins/export">å›¾ç‰‡å¯¼å‡º</a></p>
<blockquote>
<p>ç”±äºä¸šåŠ¡éœ€è¦ï¼Œéœ€è¦æŠŠç”»å¸ƒä¸Šçš„èŠ‚ç‚¹ä¿å­˜æˆå›¾ç‰‡ä¾›å…¶å®ƒæ¨¡å—å±•ç¤ºï¼Œå¦‚æœä½ çš„åç«¯è¿”å›çš„æ•°æ®æ ¼å¼æ˜¯å‰ç«¯æƒ³è¦çš„ï¼Œé‚£ä¹ˆå¤§ä¸å¿…æå›¾ç‰‡çš„å½¢å¼ï¼Œç›´æ¥æŠŠå®˜ç½‘çš„å¿«é€Ÿä¸Šæ‰‹ä»£ç æ‹¿è¿‡æ¥å¾ªç¯ä¸€ä¸‹å°±å¥½äº†â€¦â€¦ï¼Œè¿™é‡Œå°±æ‹¿<code>toPng</code>çš„æ–¹æ³•æ¥è®²è§£</p>
</blockquote>
<h3 id="é—®é¢˜æ¢³ç†">é—®é¢˜æ¢³ç† </h3>
<ul>
<li>è°ƒç”¨<code>toPng</code>æ‹¿åˆ°ç”»å¸ƒçš„base64æ•°æ®</li>
<li>æŠŠbase64çš„æ•°æ®ä¼ ç»™åç«¯</li>
<li>åç«¯æŠŠbase64çš„æ•°æ®è½¬å­˜åç”Ÿæˆå¯è®¿é—®çš„å›¾ç‰‡åœ°å€å†è¿”å›ç»™å‰ç«¯</li>
<li>å‰ç«¯å¼€å§‹å±•ç¤º</li>
</ul>
<blockquote>
<p>ç„¶è€Œäº‹æƒ…å´æ²¡æœ‰è¿™ä¹ˆç®€å•ï¼Œç¬¬ä¸€æ­¥å°±é‡åˆ°äº†ä¸€å †çš„å‘ï¼Œç”±äºå®˜ç½‘ä¸Šå¯¼å‡ºçš„éƒ½æ˜¯å®ƒå†…ç½®çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥å¯¼å‡ºéƒ½æ²¡å•¥é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä½¿ç”¨çš„æ˜¯htmlèŠ‚ç‚¹ï¼Œå¯¼å‡ºçš„æ—¶å€™ï¼Œæˆ‘èŠ‚ç‚¹çš„å›¾ç‰‡å°±æ­»æ´»å¯¼ä¸å‡ºæ¥ï¼Œè€Œä¸”å¯¼å‡ºçš„æ ·å¼ä¹Ÿæ˜¯ä¹±çš„(<a href="https://antv-x6.gitee.io/zh/docs/tutorial/epilog#%E5%AF%BC%E5%87%BA%E5%9B%BE%E7%89%87%E6%A0%B7%E5%BC%8F%E7%BC%BA%E5%A4%B1">æ ·å¼é”™ä¹±é—®é¢˜</a>)</p>
</blockquote>
<h3 id="è§£å†³æ–¹æ¡ˆ-1">è§£å†³æ–¹æ¡ˆ </h3>
<p>ä¸€å¥è¯ï¼šå›¾ç‰‡å¿…é¡»å¾—æ˜¯<strong>base64</strong>æ ¼å¼çš„å¯¼å‡ºæ‰ä¼šæœ‰å›¾ç‰‡ï¼Œä¸ç„¶æ— æ³•å¯¼å‡ºèŠ‚ç‚¹çš„å›¾ç‰‡</p>
<ol>
<li>è‡ªå®šä¹‰htmlèŠ‚ç‚¹ä¸­æŠŠå›¾ç‰‡è½¬æ¢æˆbaseæ ¼å¼çš„</li>
</ol>
<blockquote>
<p>éœ€è¦è°ƒç”¨ imageToDataUriæŠŠå›¾ç‰‡åœ°å€è½¬æˆbase64çš„æ•°æ®ï¼Œè¿™ä¸ªæ–¹æ³•æˆ‘ä¹Ÿæ˜¯æ‘¸ç´¢äº†å¥½ä¹…æ‰æ‰¾åˆ°çš„ï¼Œå®˜æ–¹æ–‡æ¡£å®Œå…¨æ²¡æœ‰æåŠè¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœéœ€è¦æŸ¥çœ‹å…¶å®ƒæ–¹æ³•ï¼Œè¯·æ‰“å° <code>DataUri</code>è¿™ä¸ªå¯¹è±¡</p>
</blockquote>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token maybe-class-name">DataUri</span><span class="token punctuation">.</span><span class="token method function property-access">imageToDataUri</span><span class="token punctuation">(</span><span class="token string">'/images/operator/datasouce.png'</span><span class="token punctuation">,</span>
  <span class="token keyword keyword-function">function</span> <span class="token punctuation">(</span><span class="token parameter">nu<span class="token punctuation">,</span> url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ— æ•ˆï¼Œç”¨çš„åªæ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ä¸å†™ä¸è¡Œ</span>
    container_img<span class="token punctuation">.</span><span class="token property-access">src</span> <span class="token operator">=</span> url<span class="token punctuation">;</span> <span class="token comment">// ç»™å›¾ç‰‡æ ‡ç­¾èµ‹å€¼</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><ol start="2">
<li>è°ƒç”¨<code>toPng</code>ç”Ÿæˆbase64æ•°æ®</li>
</ol>
<blockquote>
<p>è¿™ä¸ªæ­¥éª¤ä¸­è¦å¤„ç†çš„é—®é¢˜ï¼šå¯¼å‡ºåæ ·å¼ä¸æ­£ç¡®ï¼Œå¯¼å‡ºçš„æ—¶å€™é¡µé¢é—ªåŠ¨</p>
</blockquote>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">toPNG</span><span class="token punctuation">(</span>
  <span class="token parameter">dataUri</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'dataUri &gt;&gt;&gt;&gt;'</span><span class="token punctuation">,</span> dataUri<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™ä¸ªå°±æ˜¯baseçš„å›¾ç‰‡åœ°å€</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">526</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">268</span><span class="token punctuation">,</span>
    <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">'rgba(25, 87, 121, 0.18)'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">quality</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// å›¾ç‰‡è´¨é‡ å–å€¼èŒƒå›´ï¼š0-1ï¼Œé»˜è®¤0.92</span>
    <span class="token comment">// copyStyles: false,</span>
    <span class="token comment">// è‡ªå®šä¹‰æ ·å¼è¡¨ï¼Œä¸ºäº†è§£å†³å¯¼å‡ºåèŠ‚ç‚¹æ ·å¼ä¸¢å¤±çš„é—®é¢˜ï¼Œæš‚æ—¶å®˜æ–¹è¿˜æ²¡æœ‰ä¿®å¤è¿™ä¸ªbug</span>
    <span class="token literal-property property">stylesheet</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      .cu-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      }
      .cu-container-title {
      color: #d3e6f3;
      }
      .cu-container-img {
      width: 53px;
      height: 53px;
      margin-bottom: 4px;
      }
      .cu-container-desc {
      color: rgba(211, 230, 243, 0.7);
      margin-top: 3px;
      }
      .cu-container-title,
      .cu-container-desc {
      font-size: 14px;
      font-weight: 400;
      line-height: 20px;
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 1;
      }
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>:::warning<br>
Tipï¼šå›¾ç‰‡å¯¼å‡ºæ ·å¼å’ŒåŸèŠ‚ç‚¹çš„æ ·å¼ä¸ä¸€è‡´é—®é¢˜ï¼šå¦‚æœä½ é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œç›®å‰æœ€å¥½çš„æ–¹æ³•æ˜¯ä¸æ–­è°ƒæ•´<code>stylesheet</code>ä¸­çš„æ ·å¼ï¼Œç›´åˆ°å¯¼å‡ºçš„æ ·å¼å’ŒåŸèŠ‚ç‚¹çš„æ ·å¼å‡ ä¹ä¸€è‡´å³å¯ã€‚å½“ç„¶ï¼Œå¦‚æœä½ çš„ç”²æ–¹ä¸é‡è§†é¡µé¢äº¤äº’ï¼Œå’±ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨<code>copyStyles:true</code>è¿™ä¸ªå±æ€§å°±è¡Œäº†ï¼Œè¿™æ ·å°±ä¸ç”¨è®¾ç½® <code>stylesheet</code>äº†<br>
:::</p>
<hr>
<h2 id="ï¸--ç¥å¥‡çš„å›¾ç‰‡è¾¹æ¡†">ğŸ–¼ï¸ | ç¥å¥‡çš„å›¾ç‰‡è¾¹æ¡† </h2>
<p>:::tips<br>
æ˜¨å¤©æ‰æŠŠhtmlèŠ‚ç‚¹ä¸­çš„å›¾ç‰‡è½¬æˆbaseæ ¼å¼çš„ï¼Œä»Šå¤©å°±å‘ç°ä¸€ä¸ªç”¨æˆ·ä½“éªŒçš„é—®é¢˜ï¼›é‚£ä¹ˆæ˜¯å•¥å‘¢ï¼Ÿå°±æ˜¯æˆ‘ä»å·¦ä¾§çš„æ ‘å½¢èœå•ä¸­æ‹–æ‹½èŠ‚ç‚¹çš„æ—¶å€™ï¼ˆé¼ æ ‡æŒ‰ä¸‹ä¹Ÿæ˜¯åŒæ ·é—®é¢˜ï¼‰ï¼Œå‘ç°èŠ‚ç‚¹çš„å›¾ç‰‡åŒºåŸŸé‚£é‡Œä¼šå‡ºç°ä¸€ä¸ªè¾¹æ¡†ï¼ŒæŒç»­æ—¶é—´ä¸æ˜¯å¾ˆé•¿ï¼Œå°±å‡ æ¯«ç§’çš„æ—¶é—´ï¼Œä½†æ˜¯å½“ä½ è¿ç»­æ‹–æ‹½å‡ ä¸ªä¸åŒèŠ‚ç‚¹çš„æ—¶å€™å°±ä¼šå‘ç°è¿™ä¸ªè¾¹æ¡†ç«Ÿç„¶åˆæ¶ˆå¤±ä¸è§äº†ï¼Œå¦‚æœæ­¤æ—¶é‡æ–°è¿›å…¥é¡µé¢ï¼Œå†å¼€å§‹æ‹–åŠ¨èŠ‚ç‚¹ï¼Œå›¾ç‰‡çš„è¾¹æ¡†åˆå‡ºç°äº†ã€‚<br>
:::</p>
<h3 id="é—®é¢˜æ¢³ç†-1">é—®é¢˜æ¢³ç† </h3>
<ul>
<li>æ˜¯å¦æ˜¯å®˜æ–¹èŠ‚ç‚¹è‡ªå¸¦çš„è¾¹æ¡†ï¼Ÿå¦‚æœæ˜¯ï¼Œé…ç½®é¡¹æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>å›¾ç‰‡çš„é»˜è®¤è¾¹æ¡†æ˜¯å¦è¢«æ¸…é™¤ï¼Ÿè¿˜æ˜¯å¤–å›´å…ƒç´ çš„è¾¹æ¡†å¯¼è‡´ï¼Ÿ</li>
<li>å›¾ç‰‡çš„åŠ è½½æ—¶æœºï¼Ÿ</li>
<li>æ˜¯å¦æ˜¯è½¬base64çš„é—®é¢˜ï¼Œæ¯•ç«Ÿåœ¨è¿™ä¹‹å‰æ²¡æœ‰è¿™ä¸ªæƒ…å†µå‘ç”Ÿâ€¦â€¦<br>
:::tips<br>
å¸¦ç€è¿™äº›é—®é¢˜ï¼Œç¬¬ä¸€æ—¶é—´å»ç¿»é˜…äº†å®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°æ²¡æœ‰å’Œè¿™ä¸ªé—®é¢˜ç›¸å…³çš„é…ç½®é¡¹ï¼Œå³ä½¿æœ‰è®¾ç½®äº†ä¹Ÿä¸ç®¡ç”¨ï¼›ç„¶åå°±æŠŠé—®é¢˜æŠ›åˆ°äº†äº¤æµç¾¤é‡Œé¢ï¼Œå‘ç°å‹æ ¹æ²¡äººå›ç­”â€¦â€¦ï¼Œé‚£å°±åªèƒ½å¼€å§‹ç¬¬äºŒä¸ªæ–¹æ¡ˆäº†ï¼šæŠŠå›¾ç‰‡çš„é»˜è®¤è¾¹æ¡†éƒ½å»é™¤æ‰ï¼Œæ¯”å¦‚borderï¼Œbox-shadowï¼Œoutlineè¿™äº›å±æ€§éƒ½å»é™¤æ‰äº†ï¼Œå‘ç°è¿˜æ˜¯æ²¡ç”¨ï¼›å¥½å§ï¼Œå¼€å§‹ç¬¬ä¸‰å¥—æ–¹æ¡ˆï¼šä½¿ç”¨new Imageå¤„ç†å›¾ç‰‡çš„åŠ è½½æ—¶æœºé—®é¢˜ï¼Œå—¯ï¼ä¸å‡ºæ„å¤–çš„è¯ï¼Œè¿™ä¸ªæ–¹æ³•è¿˜æ˜¯ä¸è¡Œ<br>
:::</li>
</ul>
<h3 id="å®šä½é—®é¢˜">å®šä½é—®é¢˜ </h3>
<blockquote>
<p>ç»è¿‡ä¸Šé¢å››ä¸ªæ–¹æ¡ˆçš„å°è¯•åï¼Œæˆ‘å¤§æ¦‚çŸ¥é“äº†é—®é¢˜çš„æºå¤´åœ¨å“ªè¾¹äº†ï¼Œé‚£å°±æ˜¯æˆ‘è‡ªå®šä¹‰htmlèŠ‚ç‚¹ä¸­å›¾ç‰‡åœ°å€èµ‹å€¼çš„åœ°æ–¹ï¼Œç”±äº<code>DataUri.imageToDataUri</code> è¿™ä¸ªæ–¹æ³•æ˜¯ä¸ªå¼‚æ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æ‰ä¼šå¯¼è‡´åœ¨æ¸²æŸ“çš„æ—¶å€™ä¼šå‡ºç°çŸ­æš‚çš„è§†è§‰å·®</p>
</blockquote>
<h3 id="è§£å†³æ–¹æ¡ˆ-2">è§£å†³æ–¹æ¡ˆ </h3>
<ul>
<li>å…ˆç»™å›¾ç‰‡èµ‹å€¼ä¸ªæ™®é€šçš„åœ°å€ï¼ˆébase64çš„åœ°å€ï¼‰</li>
<li>åœ¨<code>DataUri.imageToDataUri('éšä¾¿å†™ä¸ªå‚æ•°å',url)</code>çš„å›è°ƒä¸­å†æŠŠå›¾ç‰‡çš„srcæ›¿æ¢æˆbase64çš„</li>
</ul>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-const">const</span> container_img <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
container_img<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'cu-container-img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
container_img<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'alt'</span><span class="token punctuation">,</span> <span class="token string">'èŠ‚ç‚¹ico'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
container_img<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">cursor</span> <span class="token operator">=</span> <span class="token string">'pointer'</span><span class="token punctuation">;</span>
<span class="token comment">// å…ˆç”¨è¿œç¨‹å›¾ç‰‡åœ°å€ç»™å›¾ç‰‡çš„srcèµ‹å€¼ï¼Œç„¶åå†é‡æ–°èµ‹å€¼æˆbase64çš„æ ¼å¼ï¼›è¿™ä¹ˆåšçš„ç›®çš„å°±æ˜¯è§£å†³èŠ‚ç‚¹æ‹–æ‹½åˆ°ç”»å¸ƒä¸Šä¼šå‡ºç°çŸ­æš‚çš„è¾¹æ¡†é—ªåŠ¨é—®é¢˜ï¼Œå¦‚æœä½ è¦å¤ç°è¿™ä¸ªè¾¹æ¡†ï¼Œå¯ä»¥æŠŠä¸‹é¢è¿™ä¸€è¡Œä»£ç æ³¨æ‰ï¼ˆä¸æ˜¯å¿…ç°ï¼‰</span>
container_img<span class="token punctuation">.</span><span class="token property-access">src</span> <span class="token operator">=</span> img<span class="token punctuation">;</span>
<span class="token comment">// æŠŠå›¾ç‰‡è½¬æˆbase64æ–¹ä¾¿å­˜å‚¨åˆ°åç«¯</span>
<span class="token maybe-class-name">DataUri</span><span class="token punctuation">.</span><span class="token method function property-access">imageToDataUri</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token keyword keyword-function">function</span> <span class="token punctuation">(</span><span class="token parameter">nu<span class="token punctuation">,</span> url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ— æ•ˆï¼Œç”¨çš„åªæ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ä¸å†™ç”±ä¸è¡Œ</span>
container_img<span class="token punctuation">.</span><span class="token property-access">src</span> <span class="token operator">=</span> url<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><hr>
<h2 id="ï¸--ç”»å¸ƒå†…å®¹ä»æ¥å£è·å–æ•°æ®åæ— æ³•å±…ä¸­">ğŸ–¼ï¸ | ç”»å¸ƒå†…å®¹ä»æ¥å£è·å–æ•°æ®åæ— æ³•å±…ä¸­ï¼Ÿ </h2>
<h3 id="åœºæ™¯-1">åœºæ™¯ </h3>
<p>å‰ç«¯éœ€è¦æŠŠç”»å¸ƒä¸Šçš„èŠ‚ç‚¹ä¿å­˜åˆ°åç«¯ï¼Œç„¶åå‰ç«¯åœ¨è·å–è¯¦æƒ…æ¥å£çš„æ—¶å€™è¦æŠŠèŠ‚ç‚¹è¿›è¡Œå±…ä¸­å¤„ç†</p>
<h3 id="é—®é¢˜æ¢³ç†-2">é—®é¢˜æ¢³ç† </h3>
<p>åœ¨ä¸è°ƒç”¨åç«¯æ¥å£çš„æƒ…å†µä¸‹ä½¿ç”¨<code>centerContent()</code>æ˜¯æ²¡å¾—é—®é¢˜çš„ï¼›ä½†æ˜¯åœ¨åŠ¨æ€è·å–èŠ‚ç‚¹æ•°æ®åå°±ä¼šå­˜åœ¨å¼‚æ­¥åŠ è½½çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯å…ˆå°†å†…å®¹å±…ä¸­äº†ï¼Œä¹‹åå†è®¾ç½®èŠ‚ç‚¹åˆ°ç”»å¸ƒä¸­å»ï¼Œæ­¤æ—¶<code>centerContent</code>çš„æ—¶æœºå·²ç»è¿‡å»äº†ï¼ŒèŠ‚ç‚¹è¿˜æ˜¯æ›´å…·è‡ªèº«çš„ä½ç½®è¿›è¡Œæ’åˆ—</p>
<h3 id="è§£å†³æ–¹æ¡ˆ-3">è§£å†³æ–¹æ¡ˆ </h3>
<blockquote>
<p>ç”±äºä½œè€…ç”¨çš„vueæŠ€æœ¯æ ˆï¼Œæ‰€ä»¥è¿™é‡Œçš„è§£å†³æ–¹æ³•ä¸»è¦ä»¥vueä¸ºä¸»</p>
</blockquote>
<p>æ–¹æ¡ˆ1ï¼šä½¿ç”¨<code>nextTick</code>ç­‰å¾…domå…¨éƒ¨æ¸²æŸ“å®Œæˆ</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
	graph<span class="token punctuation">.</span><span class="token method function property-access">centerContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>æ–¹æ¡ˆ2ï¼šç›´æ¥åœ¨æ¥å£ä¸­ä½¿ç”¨</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token function">getDataView</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token property-access">tableMetaName</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token property-access">code</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç¼©æ”¾</span>
      graph<span class="token punctuation">.</span><span class="token method function property-access">zoom</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// ç”»å¸ƒå±…ä¸­</span>
      graph<span class="token punctuation">.</span><span class="token method function property-access">centerContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><hr>
<h2 id="ï¸--è‡ªå®šä¹‰å³é”®èœå•åæ ‡ä¸å‡†ç¡®">ğŸ–¼ï¸ | è‡ªå®šä¹‰å³é”®èœå•åæ ‡ä¸å‡†ç¡®ï¼Ÿ </h2>
<h3 id="é—®é¢˜æ¢³ç†-3">é—®é¢˜æ¢³ç† </h3>
<p>åŸæœ¬çš„å†™æ³•æ˜¯èŠ‚ç‚¹å³é”®çš„æ—¶å€™é€šè¿‡<code>node.position()</code>çš„æ–¹æ³•è·å–èŠ‚ç‚¹çš„åæ ‡ï¼Œç„¶åå†æŠŠèŠ‚ç‚¹çš„åæ ‡ç»‘åˆ°å³é”®èœå•çš„domä¸Šï¼Œä½†æ˜¯å‘ç°å¯¹ç”»å¸ƒè¿›è¡Œå¹³ç§»çš„æ—¶å€™ï¼Œå³é”®èœå•çš„ä½ç½®è¿˜åœç•™åœ¨ç¬¬ä¸€æ¬¡çš„ä½ç½®ï¼ŒåŸå› å°±æ˜¯ç”»å¸ƒå¹³ç§»å’ŒèŠ‚ç‚¹æ²¡å•¥å…³ç³»ï¼ŒèŠ‚ç‚¹çš„åæ ‡å¹¶ä¸ä¼šå› ä¸ºç”»å¸ƒå¹³ç§»äº†å°±è‡ªåŠ¨æ›´æ”¹è‡ªèº«çš„åæ ‡</p>
<h3 id="è§£å†³æ–¹æ¡ˆ-4">è§£å†³æ–¹æ¡ˆ </h3>
<p><code>å¯¹é¼ æ ‡çš„åæ ‡è¿›è¡Œè½¬æ¢</code>ï¼Œè¿™ä¹Ÿæ˜¯1.9ç‰ˆæœ¬ä¸­æ–°å¢çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå…³é”®æ˜¯åœ¨å®˜æ–¹æ–‡æ¡£ä¸­è¿˜æ‰¾ä¸åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œåªèƒ½æ­»é©¬å½“æ´»é©¬åŒ»äº† <a href="https://antv-x6.gitee.io/zh/docs/tutorial/log#19x">åæ ‡è½¬æ¢</a>ï¼Œæœç„¶é—®é¢˜è§£å†³äº†</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'node:contextmenu'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> e<span class="token punctuation">,</span> node <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> pos <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">clientToGraph</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">clientX</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token property-access">clientY</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ ¸å¿ƒä»£ç å°±æ˜¯è¿™ä¸€è¡Œ</span>
  <span class="token function">createMenuDom</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> pos<span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> pos<span class="token punctuation">.</span><span class="token property-access">y</span><span class="token punctuation">,</span> node<span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="é™„è‡ªå®šä¹‰å³é”®èœå•å®Œæ•´ä»£ç ">é™„ï¼šè‡ªå®šä¹‰å³é”®èœå•å®Œæ•´ä»£ç  </h3>
<p>è¿™é‡Œéœ€è¦å¯¹javascriptçš„domæœ‰ç‚¹åŸºç¡€ï¼Œä¸è¿‡è¿™åªæ˜¯æˆ‘åˆ›å»ºdomçš„æ–¹æ³•ï¼Œå¦‚æœä½ ä»¬æƒ³ç”¨å…¶å®ƒçš„æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥çš„å“ˆ</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-let">let</span> divMenuContainer <span class="token operator">=</span> <span class="token keyword null nil keyword-null">null</span><span class="token punctuation">;</span>
<span class="token keyword keyword-const">const</span> <span class="token function-variable function">createMenuDom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> node<span class="token punctuation">,</span> edge<span class="token punctuation">,</span> type <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>divMenuContainer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœå­˜åœ¨äº†èœå•ï¼Œå°±å…ˆç§»é™¤å†åˆ›å»ºï¼Œä¸ç„¶ä½ çš„é¡µé¢ä¸Šä¼šå¤šå‡ºæ¥å¥½å¤šèœå•çš„</span>
    <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">removeChild</span><span class="token punctuation">(</span>divMenuContainer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  divMenuContainer <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  divMenuContainer<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'div-menu-container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  divMenuContainer<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">left</span> <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">30</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  divMenuContainer<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">top</span> <span class="token operator">=</span> y <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-const">const</span> divMenuItem <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  divMenuItem<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'div-menu-item'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  divMenuItem<span class="token punctuation">.</span><span class="token property-access">innerText</span> <span class="token operator">=</span> type <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'åˆ é™¤èŠ‚ç‚¹'</span> <span class="token operator">:</span> <span class="token string">'åˆ é™¤è¾¹'</span><span class="token punctuation">;</span>
  divMenuItem<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    type <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> graph<span class="token punctuation">.</span><span class="token method function property-access">removeNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token operator">:</span> graph<span class="token punctuation">.</span><span class="token method function property-access">removeEdge</span><span class="token punctuation">(</span>edge<span class="token punctuation">)</span><span class="token punctuation">;</span>
    divMenuContainer<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">display</span> <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  divMenuContainer<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>divMenuItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>divMenuContainer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>divMenuContainer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      divMenuContainer<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">display</span> <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'node:contextmenu'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> e<span class="token punctuation">,</span> node <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// åæ ‡è½¬æ¢</span>
  <span class="token keyword keyword-const">const</span> pos <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">clientToGraph</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">clientX</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token property-access">clientY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// è°ƒç”¨åˆ›å»ºdomçš„æ–¹æ³•ï¼ŒæŠŠåæ ‡å’ŒèŠ‚ç‚¹ä¿¡æ¯ä¼ é€’è¿›å»</span>
  <span class="token function">createMenuDom</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> pos<span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> pos<span class="token punctuation">.</span><span class="token property-access">y</span><span class="token punctuation">,</span> node<span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h4 id="æ•ˆæœå›¾">æ•ˆæœå›¾ </h4>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1686388439644-e839122d-00ac-4087-bb06-c359692dff6a.png#averageHue=%23faf9f8&amp;clientId=u36bc8a32-befd-4&amp;from=paste&amp;height=169&amp;id=u56d69601&amp;originHeight=253&amp;originWidth=370&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=11943&amp;status=done&amp;style=none&amp;taskId=u5b4ce435-38ca-40d3-b5ad-d6793fd7a45&amp;title=&amp;width=246.66666666666666" alt="image.png"></p>
<hr>
<h2 id="ï¸--åœ¨å†å²è®°å½•ä¸­å¿½ç•¥æŸä¸ªå±æ€§çš„ä¿®æ”¹">ğŸ–¼ï¸ | åœ¨å†å²è®°å½•ä¸­å¿½ç•¥æŸä¸ªå±æ€§çš„ä¿®æ”¹ </h2>
<p><a href="https://antv-x6.gitee.io/zh/docs/tutorial/epilog#%E5%9C%A8%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E4%B8%AD%E5%BF%BD%E7%95%A5%E6%9F%90%E4%B8%AA%E5%B1%9E%E6%80%A7%E7%9A%84%E4%BF%AE%E6%94%B9">å¸¸è§é—®é¢˜</a><br>
ä¹Ÿæ˜¯ä¸‹é¢è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆ<br>
<img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1685515952540-8cba3bd0-da00-49ef-994d-30cf22afbf4f.png#averageHue=%231d1c1c&amp;clientId=u21d263e6-84bc-4&amp;from=paste&amp;height=129&amp;id=uff262b18&amp;originHeight=185&amp;originWidth=1065&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=26820&amp;status=done&amp;style=none&amp;taskId=u278425e9-106c-48c9-a22d-b48d5b644a6&amp;title=&amp;width=742" alt="image.png"><br>
è¿™æ˜¯å®˜æ–¹çš„demo<br>
<a href="https://codesandbox.io/s/lian-xian-undo-ybz995">è¿çº¿ undo - CodeSandbox</a></p>
<h3 id="historyæ’ä»¶é…ç½®">historyæ’ä»¶é…ç½® </h3>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-new">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token function">beforeAddCommand</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¿½ç•¥å†å²å˜æ›´</span>
      <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">.</span><span class="token property-access">ignoreHistory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow keyword-return">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h3 id="è¾¹çš„å†™æ³•">è¾¹çš„å†™æ³• </h3>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'edge:connected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> edge <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token comment">// ä¼ å…¥è‡ªå®šä¹‰çš„ ignoreHistory é€‰é¡¹æ¥å¿½ç•¥å†å²å˜æ›´</span>
   edge<span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">'line/strokeDasharray'</span><span class="token punctuation">,</span> <span class="token keyword null nil keyword-null">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">ignoreHistory</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h3 id="èŠ‚ç‚¹çš„å†™æ³•">èŠ‚ç‚¹çš„å†™æ³• </h3>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-new">new</span> <span class="token class-name">History</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function">beforeAddCommand</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span><span class="token property-access">options</span><span class="token punctuation">.</span><span class="token property-access">ignoreHistory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
node<span class="token punctuation">.</span><span class="token method function property-access">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">tableMeta</span><span class="token operator">:</span> res<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">records</span><span class="token punctuation">,</span> <span class="token literal-property property">desc</span><span class="token operator">:</span> res<span class="token operator">?.</span>data<span class="token operator">?.</span>records<span class="token operator">?.</span>length <span class="token operator">||</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">ignoreHistory</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><hr>
<h2 id="ï¸--xå’Œyåæ ‡ä¸ºå­—ç¬¦ä¸²æŠ¥é”™é—®é¢˜">ğŸ–¼ï¸ | xå’Œyåæ ‡ä¸ºå­—ç¬¦ä¸²æŠ¥é”™é—®é¢˜ </h2>
<h3 id="è§£å†³æ–¹æ¡ˆ-5">è§£å†³æ–¹æ¡ˆ </h3>
<p>ç›´æ¥æŠŠx,yåæ ‡è½¬æˆçº¯æ•°å­—çš„å³å¯ï¼Œä¸ç„¶æ‹–åŠ¨èŠ‚ç‚¹çš„æ—¶å€™ä¼šæŠ¥é”™çš„</p>
<hr>
<h2 id="ï¸--è®¾ç½®èŠ‚ç‚¹ç§»åŠ¨èŒƒå›´åœ¨ç”»å¸ƒå†…">ğŸ–¼ï¸ | è®¾ç½®èŠ‚ç‚¹ç§»åŠ¨èŒƒå›´åœ¨ç”»å¸ƒå†… </h2>
<p><a href="https://antv-x6.gitee.io/zh/docs/api/graph/transform/#translating">Transform</a></p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-new">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">translating</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">restrict</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h2 id="ï¸--è·å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰çˆ¶çº§èŠ‚ç‚¹">ğŸ–¼ï¸ | è·å–å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰çˆ¶çº§èŠ‚ç‚¹ </h2>
<blockquote>
<p>æ­¤æ–¹æ³•ä¼šè¿”å›æ‰€æœ‰çš„è¾“å…¥å’Œè¾“å‡ºè¾¹ï¼Œå¦‚æœåªè¦è¾“å…¥è¾¹çš„èŠ‚ç‚¹æˆ–è€…è¾“å‡ºè¾¹çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œè¯·çœ‹è¿™é‡Œ<a href="https://antv-x6.gitee.io/zh/docs/api/graph/model/#getconnectededges">é“¾æ¥</a></p>
</blockquote>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-const">const</span> <span class="token function-variable function">getParentNodes</span> <span class="token operator">=</span> <span class="token parameter">node</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> nodeId <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-const">const</span> connectedNodes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// å¦‚æœéœ€è¦å…¶ä»–æ–¹æ³•ï¼Œè¯·çœ‹ä¸‹æ–¹çš„å…·ä½“é…ç½®ï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦ä¿®æ”¹è¿™é‡Œçš„ä»£ç å³å¯</span>
  <span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getConnectedEdges</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> edge <span class="token keyword keyword-of">of</span> edges<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-const">const</span> sourceNode <span class="token operator">=</span> edge<span class="token punctuation">.</span><span class="token method function property-access">getSourceNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> targetNode <span class="token operator">=</span> edge<span class="token punctuation">.</span><span class="token method function property-access">getTargetNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>sourceNode<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">!==</span> nodeId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      connectedNodes<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>sourceNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>targetNode<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">!==</span> nodeId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      connectedNodes<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>targetNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow keyword-return">return</span> connectedNodes<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å…·ä½“çš„é…ç½®</span>
<span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getConnectedEdges</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token comment">// è¿”å›è¾“å…¥å’Œè¾“å‡ºè¾¹</span>
<span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getConnectedEdges</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">incoming</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">outgoing</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å›è¾“å…¥å’Œè¾“å‡ºè¾¹</span>

<span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getConnectedEdges</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">incoming</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å›è¾“å…¥è¾¹</span>
<span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getConnectedEdges</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">incoming</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">outgoing</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å›è¾“å…¥è¾¹</span>

<span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getConnectedEdges</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">outgoing</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å›è¾“å‡ºè¾¹</span>
<span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getConnectedEdges</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">incoming</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">outgoing</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å›è¾“å‡ºè¾¹</span>

<span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getConnectedEdges</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å›è¾“å…¥å’Œè¾“å‡ºè¾¹ï¼ŒåŒ…å«é“¾æ¥åˆ°æ‰€æœ‰å­å­™èŠ‚ç‚¹/è¾¹çš„è¾“å…¥å’Œè¾“å‡ºè¾¹</span>
<span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getConnectedEdges</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">incoming</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å›è¾“å…¥è¾¹ï¼ŒåŒ…å«é“¾æ¥åˆ°æ‰€æœ‰å­å­™èŠ‚ç‚¹/è¾¹çš„è¾“å…¥è¾¹</span>
<span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getConnectedEdges</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">enclosed</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å›è¾“å…¥å’Œè¾“å‡ºè¾¹ï¼ŒåŒæ—¶åŒ…å«å­å­™èŠ‚ç‚¹/è¾¹ä¹‹é—´ç›¸è¿çš„è¾¹</span>

<span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getConnectedEdges</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">indirect</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å›è¾“å…¥å’Œè¾“å‡ºè¾¹ï¼ŒåŒ…å«é—´æ¥è¿æ¥çš„è¾¹</span>
</code></pre><hr>
<h2 id="ï¸--æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹æŠ¥é”™">ğŸ–¼ï¸ | æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹æŠ¥é”™ï¼Ÿ </h2>
<h3 id="æŠ¥é”™ä¿¡æ¯">æŠ¥é”™ä¿¡æ¯ </h3>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token punctuation">(</span><span class="token keyword keyword-in">in</span> promise<span class="token punctuation">)</span> <span class="token known-class-name class-name">Error</span><span class="token operator">:</span> <span class="token maybe-class-name">Node</span> <span class="token keyword keyword-with">with</span> name <span class="token string">'cu-port'</span> already registered<span class="token punctuation">.</span>
</code></pre><p>ä¸‹é¢è¿™ä¸ªæŠ¥é”™æ˜¯ç¾¤å‹å‘çš„ï¼Œä½†æ˜¯é—®é¢˜å’Œæˆ‘ä¹‹å‰é‡åˆ°çš„æ˜¯ä¸€ç±»é—®é¢˜ï¼Œæ‰€ä»¥å°±ç›´æ¥å‘Šè¯‰ç¾¤å‹é—®é¢˜æ‰€åœ¨äº†ğŸ˜€<br>
<img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1685437902604-0e47dc85-ad6d-44d2-8280-e056fddffd28.png#averageHue=%238b8d8a&amp;clientId=ua6083450-d8a2-4&amp;from=paste&amp;height=335&amp;id=u13eae419&amp;originHeight=503&amp;originWidth=1345&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=755621&amp;status=done&amp;style=none&amp;taskId=u1060a3c2-cd9a-4cc5-8c63-d09d4c38a10&amp;title=&amp;width=896.6666666666666" alt="image.png"></p>
<h3 id="é”™è¯¯ä»£ç ">é”™è¯¯ä»£ç  </h3>
<p><code>Graph.registerNode(name,options)</code></p>
<h3 id="æ­£ç¡®ä»£ç ">æ­£ç¡®ä»£ç  </h3>
<p><code>Graph.registerNode(name,options,true)</code></p>
<hr>
<h2 id="ï¸--åˆ é™¤è¾¹çš„æ—¶å€™è·å–è¾¹è¿æ¥çš„èŠ‚ç‚¹æ•°æ®">ğŸ–¼ï¸ | åˆ é™¤è¾¹çš„æ—¶å€™ï¼Œè·å–è¾¹è¿æ¥çš„èŠ‚ç‚¹æ•°æ® </h2>
<p><a href="https://antv-x6.gitee.io/zh/docs/api/graph/model/#getsuccessors">getSuccessors</a><br>
<img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1686809412959-1f7e6193-1fb6-48d1-93c8-9fdc2a45f925.png#averageHue=%23fcf4f2&amp;clientId=ubba055f2-acab-4&amp;from=paste&amp;height=281&amp;id=u604d5c6b&amp;originHeight=421&amp;originWidth=1006&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=59888&amp;status=done&amp;style=none&amp;taskId=uebd7f37a-612d-4878-897d-f4bdce0c892&amp;title=&amp;width=670.6666666666666" alt="image.png"></p>
<h3 id="ä¸šåŠ¡åœºæ™¯">ä¸šåŠ¡åœºæ™¯ </h3>
<blockquote>
<p>ç°åœ¨ç”»å¸ƒä¸Šæœ‰5ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¹‹é—´éƒ½æœ‰è¾¹è¿›è¡Œç›¸è¿ï¼Œå½“æˆ‘åœ¨åˆ é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å’Œç¬¬äºŒä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è¾¹çš„æ—¶å€™ï¼Œè¦è·å–åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯ä»¥åŠå’Œç¬¬äºŒä¸ªèŠ‚ç‚¹ç›¸è¿æ¥çš„æ‰€æœ‰çš„å­å­™èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬ç›´æ¥æˆ–è€…é—´æ¥è¿æ¥çš„èŠ‚ç‚¹</p>
</blockquote>
<h3 id="é—®é¢˜æ¢³ç†-4">é—®é¢˜æ¢³ç† </h3>
<blockquote>
<p>ä½¿ç”¨<code>getConnectedEdges</code>è¿™ä¸ªæ–¹æ³•è·å–æ‰€æœ‰ç›¸è¿æ¥çš„è¾¹ï¼Œç„¶åé€šè¿‡è¾¹çš„èµ·å§‹å’Œç»“æŸå­—æ®µå»è·å–èµ·å§‹èŠ‚ç‚¹å’Œç»“æŸèŠ‚ç‚¹ï¼Œå—¯ï¼Œå‘ç°è¿™ä¸ªæ–¹æ³•è¡Œä¸é€šï¼›å¼€å§‹ç¬¬äºŒå¥—æ–¹æ¡ˆï¼šæ ¹æ®å½“å‰èŠ‚ç‚¹è·å–å®ƒçš„æ‰€æœ‰å­©å­èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯<code>getChildren</code>è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯è¿˜ä¸è¡Œï¼Œå®ƒåªèƒ½è·å–åˆ°ç›´æ¥çš„å­èŠ‚ç‚¹ï¼Œé—´æ¥çš„èŠ‚ç‚¹å°±è·å–ä¸åˆ°äº†ï¼›ç»§ç»­ç¬¬ä¸‰å¥—æ–¹æ¡ˆï¼šå»å¤§æµ·é‡Œæé’ˆï¼ˆåœ¨1.xçš„æ–‡æ¡£é‡Œé¢æ‰¾åˆ°çš„ä¸€ä¸ªapiï¼‰ï¼Œ<code>getSuccessors(node)</code>,å—¯ï¼ŒæŒºå¥½ï¼Œè¿™ä¸ªå¯ä»¥è·å–äº†</p>
</blockquote>
<h3 id="ä»£ç ç¤ºä¾‹">ä»£ç ç¤ºä¾‹ </h3>
<ul>
<li>è¾¹è¢«åˆ é™¤è§¦å‘çš„äº‹ä»¶</li>
</ul>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'edge:removed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> edge <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><ul>
<li>æ ¹æ®è¾¹çš„sorceå’Œtargetè·å–èŠ‚ç‚¹çš„æ•°æ®</li>
</ul>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">getCellById</span><span class="token punctuation">(</span>edge<span class="token operator">?.</span>target<span class="token operator">?.</span>cell<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><ul>
<li>æ ¹æ®nodeèŠ‚ç‚¹è·å–æ‰€æœ‰çš„å­å­™èŠ‚ç‚¹</li>
</ul>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">getSuccessors</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><ul>
<li>å®Œæ•´ä»£ç </li>
</ul>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>  <span class="token comment">// è¾¹è¢«åˆ é™¤çš„æ—¶å€™è§¦å‘</span>
  graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'edge:removed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> edge <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–è¾¹çš„ç»“æŸèŠ‚ç‚¹ä¿¡æ¯ unshift</span>
    <span class="token keyword keyword-const">const</span> node <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getCellById</span><span class="token punctuation">(</span>edge<span class="token operator">?.</span>target<span class="token operator">?.</span>cell<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è¿™é‡Œéœ€è¦æ‹¦æˆªä¸‹nodeçš„å€¼æ˜¯ä¸æ˜¯nullï¼Œå› ä¸ºåœ¨åˆ é™¤èŠ‚ç‚¹çš„æ—¶å€™ä¼šåŒæ—¶åˆ é™¤è¾¹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä¸ç®¡æ˜¯åˆ é™¤èŠ‚ç‚¹è¿˜æ˜¯åˆ é™¤è¾¹ï¼Œéƒ½ä¼šè¿›è¿™ä¸ªæ–¹æ³•çš„</span>
    <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>node <span class="token operator">==</span> <span class="token keyword null nil keyword-null">null</span><span class="token punctuation">)</span> <span class="token keyword control-flow keyword-return">return</span><span class="token punctuation">;</span>
    <span class="token comment">// https://antv-x6.gitee.io/zh/docs/api/graph/model/#getsuccessors</span>
    <span class="token keyword keyword-let">let</span> childNodes <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getSuccessors</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// è¿™é‡ŒæŠŠæœ¬èº«çš„èŠ‚ç‚¹ä¹Ÿæ·»åŠ è¿›å»ï¼Œå¦‚æœä¸éœ€è¦å°±ä¸ç”¨pushäº†ï¼Œç›´æ¥ä½¿ç”¨childNodeså°±è¡Œäº†</span>
    childNodes<span class="token punctuation">.</span><span class="token method function property-access">unshift</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'å­å­™èŠ‚ç‚¹ä¸åŒ…å«æœ¬èº« &gt;&gt;&gt;'</span><span class="token punctuation">,</span> childNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><hr>
<h2 id="ï¸--å»é™¤è¾¹çš„ç®­å¤´">ğŸ–¼ï¸ | å»é™¤è¾¹çš„ç®­å¤´ </h2>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1688974334412-06ce5bff-00db-4860-b3b1-b1e1608983d8.png#averageHue=%23e8eff9&amp;clientId=u82439091-4509-4&amp;from=paste&amp;height=179&amp;id=u786afb29&amp;originHeight=268&amp;originWidth=1344&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=76101&amp;status=done&amp;style=none&amp;taskId=u0a14558e-174e-4fbf-b8a6-0334dd937ef&amp;title=&amp;width=896" alt="lQLPJwAn3bZEYW7NAQzNBUCwNtUOwPf-1RcEoUpIPACjAA_1344_268.png"></p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token literal-property property">attrs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">line</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">stroke</span><span class="token operator">:</span> <span class="token string">'#028FA6'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">strokeWidth</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">targetMarker</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
          <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
          <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">8</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><h2 id="ï¸--æ€ä¹ˆåŒºåˆ†-edgeremoved-äº‹ä»¶è§¦å‘åŸå› ">ğŸ–¼ï¸ | æ€ä¹ˆåŒºåˆ† edge:removed äº‹ä»¶è§¦å‘åŸå›  </h2>
<p>è°ƒç”¨ <code>removeEdge</code> æˆ–è€…æ‰‹åŠ¨åˆ é™¤ edge æ—¶éƒ½ä¼šè§¦å‘ <code>edge:removed</code> äº‹ä»¶ï¼Œé‚£æ€ä¹ˆåŒºåˆ†ä¸¤ç§è¡Œä¸ºå‘¢ï¼Ÿåœ¨è°ƒç”¨ <code>removeEdge</code> çš„æ—¶å€™å¯ä»¥ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•° optionsï¼Œåœ¨ options é‡Œé¢å®šä¹‰è‡ªå·±çš„å±æ€§ï¼Œåœ¨<code>edge:remove</code> äº‹ä»¶å‚æ•°ä¸­èƒ½è·å–åˆ°è‡ªå®šä¹‰çš„å±æ€§ã€‚</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">removeEdge</span><span class="token punctuation">(</span>edge<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">triggerByFunction</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">"edge:removed"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> options <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token property-access">triggerByFunction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è°ƒç”¨removeEdgeåˆ é™¤è¾¹</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><hr>
<h2 id="ï¸--è¿æ¥æ¡©é¼ æ ‡ç§»å…¥æ˜¾ç¤ºç§»å‡ºéšè—">ğŸ–¼ï¸ | è¿æ¥æ¡©é¼ æ ‡ç§»å…¥æ˜¾ç¤º/ç§»å‡ºéšè— </h2>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token doc-comment comment">/**
 * æ˜¾ç¤ºèŠ‚ç‚¹ä¸Šçš„è¿æ¥æ¡©
 * <span class="token keyword keyword-@param">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">ports</span>
 * <span class="token keyword keyword-@param">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">show</span>
 */</span>
<span class="token keyword module keyword-export">export</span> <span class="token keyword keyword-const">const</span> <span class="token function-variable function">showPorts</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">ports<span class="token punctuation">,</span> show</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-let">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> ports<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ports<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">visibility</span> <span class="token operator">=</span> show <span class="token operator">?</span> <span class="token string">'visible'</span> <span class="token operator">:</span> <span class="token string">'hidden'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token comment">// èŠ‚ç‚¹é¼ æ ‡ç§»å…¥äº‹ä»¶</span>
graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'node:mouseenter'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> container <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-const">const</span> ports <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token method function property-access">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.x6-port-body'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">showPorts</span><span class="token punctuation">(</span>ports<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// èŠ‚ç‚¹é¼ æ ‡ç¦»å¼€äº‹ä»¶</span>
graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'node:mouseleave'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> container <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-const">const</span> ports <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token method function property-access">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.x6-port-body'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">showPorts</span><span class="token punctuation">(</span>ports<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token comment">// è¿æ¥æ¡©é…ç½®ç¤ºä¾‹</span>
<span class="token literal-property property">groups</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">'top'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">attrs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">circle</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token literal-property property">magnet</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">stroke</span><span class="token operator">:</span> <span class="token string">'#028FA6'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">strokeWidth</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">'#fff'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">visibility</span><span class="token operator">:</span> <span class="token string">'hidden'</span> <span class="token comment">// è¿™ä¸ªä¸€å®šè¦é…ç½®ï¼ï¼ï¼</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><h2 id="ï¸--é€šè¿‡getnodesæ–¹æ³•è·å–çš„èŠ‚ç‚¹æ— æ³•è·å–åˆ°èŠ‚ç‚¹çš„xå’Œyå±æ€§">ğŸ–¼ï¸ | é€šè¿‡getNodesæ–¹æ³•è·å–çš„èŠ‚ç‚¹æ— æ³•è·å–åˆ°èŠ‚ç‚¹çš„xå’Œyå±æ€§ </h2>
<h3 id="åœºæ™¯å¤ç°issueshttpsgithubcomantvisx6issues388">åœºæ™¯å¤ç°<a href="https://github.com/antvis/X6/issues/388">issues</a> </h3>
<p>è¿™æ˜¯é€šè¿‡<code>getNodes</code>è·å–åˆ°çš„èŠ‚ç‚¹å®ä¾‹<br>
<img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1702519476248-affe06f8-03da-4e24-895f-7a1e438563ff.png#averageHue=%23fdfcfb&amp;clientId=u845fea25-7adf-4&amp;from=paste&amp;height=426&amp;id=u81372ae5&amp;originHeight=639&amp;originWidth=739&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=51443&amp;status=done&amp;style=none&amp;taskId=u04896b38-8f51-4af3-bc7b-afa293b6165&amp;title=&amp;width=492.6666666666667" alt="image.png"></p>
<h3 id="è§£å†³æ–¹æ¡ˆ1">è§£å†³æ–¹æ¡ˆ1 </h3>
<p>é€šè¿‡<code>JSON.parse(JSON.stringify(graph.getNodes()))</code>è·å–ï¼Œåæ ‡æ”¾åœ¨äº†positionå¯¹è±¡é‡Œé¢<br>
<img src="https://cdn.nlark.com/yuque/0/2023/png/2578582/1702519714827-c493d2e6-64e8-432b-9762-d3ee45870665.png#averageHue=%23fdf8f8&amp;clientId=u845fea25-7adf-4&amp;from=paste&amp;height=276&amp;id=u3a5980c9&amp;originHeight=414&amp;originWidth=715&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=37428&amp;status=done&amp;style=none&amp;taskId=u29239a4b-4a60-4c7c-a788-b70f853514b&amp;title=&amp;width=476.6666666666667" alt="image.png"></p>
<h3 id="è§£å†³æ–¹æ¡ˆ2">è§£å†³æ–¹æ¡ˆ2 </h3>
<p>ä½¿ç”¨<code>node.toJSON()</code>æ–¹æ³•æŠŠèŠ‚ç‚¹è½¬æˆ<code>json</code>æ•°æ®</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-const">const</span> allNodes <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow keyword-return">return</span> item<span class="token punctuation">.</span><span class="token method function property-access">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="è§£å†³æ–¹æ¡ˆ3">è§£å†³æ–¹æ¡ˆ3 </h3>
<p>ä½¿ç”¨<code>node.position()</code>æ–¹æ³•è·å–èŠ‚ç‚¹ä½ç½®ï¼Œç„¶åèµ‹å€¼åˆ°<code>data</code>é‡Œé¢ï¼Œåé¢ä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥ä»<code>data</code>é‡Œé¢è·å–</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>  <span class="token keyword keyword-let">let</span> allNodes <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token method function property-access">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">x</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
    item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">y</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><hr>
<h2 id="ï¸--æ ¹æ®æ¡ä»¶åŠ è½½ä¸åŒçš„é…ç½®">ğŸ–¼ï¸ | æ ¹æ®æ¡ä»¶åŠ è½½ä¸åŒçš„é…ç½® </h2>
<p>åœºæ™¯æ¥æºäºç³»ç»Ÿæ¢è‚¤ï¼Œæˆ‘çš„ç³»ç»Ÿæœ‰æ¢è‚¤è¿™ä¸ªåŠŸèƒ½ï¼Œä¸€ä¸ªæ˜¯æ·±è‰²æ¨¡å¼ï¼Œä¸€ä¸ªæ˜¯æµ…è‰²æ¨¡å¼ï¼Œä¸åŒçš„æ¨¡å¼è¦æ˜¾ç¤ºä¸åŒé£æ ¼çš„èŠ‚ç‚¹é…ç½®ï¼Œæ¯”å¦‚æµ…è‰²æ¨¡å¼ä¸‹edgeçš„é¢œè‰²è¦ä¸ºé»‘è‰²ï¼ŒèŠ‚ç‚¹çš„å›¾æ ‡ä¹Ÿè¦æ¢æˆæµ…è‰²æ¨¡å¼çš„â€¦â€¦</p>
<h3 id="å¦‚ä½•é‡æ–°åˆå§‹åŒ–ç”»å¸ƒ">å¦‚ä½•é‡æ–°åˆå§‹åŒ–ç”»å¸ƒï¼Ÿ </h3>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token comment">// ä½¿ç”¨è®¡ç®—å±æ€§è·å–å½“å‰ç³»ç»Ÿæ¨¡å¼ï¼ˆlight/darkï¼‰</span>
<span class="token keyword keyword-const">const</span> getTheme <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow keyword-return">return</span> theme<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// watch ç›‘å¬ä¸»é¢˜å˜åŒ–é‡æ–°åˆå§‹åŒ–ç”»å¸ƒï¼ŒinitGraph æ–¹æ³•é‡Œé¢å°±æ˜¯x6çš„é‚£äº›ä¸ƒä¸ƒå…«å…«çš„é…ç½®</span>
<span class="token function">watch</span><span class="token punctuation">(</span>theme<span class="token punctuation">,</span> <span class="token parameter">val</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">initGraph</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// if (route.query.id) {</span>
  <span class="token comment">//   getModelInfo(route.query.id);</span>
  <span class="token comment">// }</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// initGraphçš„æ–¹æ³• currentThemeå°±æ˜¯å½“å‰ç›‘å¬åˆ°çš„ä¸»é¢˜æ¨¡å¼</span>
<span class="token keyword keyword-const">const</span> <span class="token function-variable function">initGraph</span> <span class="token operator">=</span> <span class="token parameter">currentTheme</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-let">let</span> tempConfig <span class="token operator">=</span> currentTheme <span class="token operator">===</span> <span class="token string">'light'</span> <span class="token operator">?</span> graphConfigLight <span class="token operator">:</span> graphConfig<span class="token punctuation">;</span>
  <span class="token comment">// è¿™é‡Œå¿…é¡»è¦å…ˆé”€æ¯ä¸‹å†åˆå§‹åŒ–</span>
  <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>graph<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    graph<span class="token punctuation">.</span><span class="token method function property-access">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  graph <span class="token operator">=</span> <span class="token keyword null nil keyword-null">null</span><span class="token punctuation">;</span>
  graph <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">container</span><span class="token operator">:</span> proxy<span class="token punctuation">.</span><span class="token property-access">$refs</span><span class="token punctuation">.</span><span class="token property-access">container</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
    <span class="token spread operator">...</span>tempConfig
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// å¦‚æœåé¢è¿˜æœ‰ä½¿ç”¨æ’ä»¶çš„åœ°æ–¹å°±ç»§ç»­å¾€ä¸‹å†™</span>
<span class="token punctuation">}</span>
</code></pre><h3 id="ä¸é€šè¿‡åŠ è½½ç”»å¸ƒé…ç½®">ä¸é€šè¿‡åŠ è½½ç”»å¸ƒé…ç½®ï¼Ÿ </h3>
<blockquote>
<p>å¦‚æœä¸é€šè¿‡é‡è½½ç”»å¸ƒçš„æ–¹æ³•ï¼Œé‚£æˆ‘ä»¬å°±ä¸éœ€è¦å®šä¹‰ä¸¤ç§é…ç½®äº†ï¼Œåªéœ€è¦è€ƒè™‘æ€ä¹ˆæŠŠæ‰€æœ‰çš„èŠ‚ç‚¹å’Œçº¿çš„é…ç½®ç»™æ›´æ–°æ‰å°±è¡Œäº†ã€‚è¿™é‡Œå…ˆè¯´ä¸€ä¸‹çº¿çš„æ›´æ”¹æ–¹æ³•ï¼Œå› ä¸ºçº¿æ›´æ–°æ¯”è¾ƒç®€å•</p>
</blockquote>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token comment">// é¦–å…ˆä½ å¾—æœ‰ç›‘å¬ä¸»é¢˜è‰²å˜åŒ–çš„æ–¹æ³•</span>
<span class="token function">watch</span><span class="token punctuation">(</span>theme<span class="token punctuation">,</span> <span class="token parameter">val</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// å…ˆè·å–ç”»å¸ƒä¸Šçš„æ‰€æœ‰çº¿</span>
  <span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getEdges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// å¯¹çº¿è¿›è¡Œéå†ï¼Œæ ¹æ®ä¸»é¢˜åŠ¨æ€è®¾ç½®çº¿çš„é¢œè‰²</span>
  edges<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    item<span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">'line/stroke'</span><span class="token punctuation">,</span> val <span class="token operator">===</span> <span class="token string">'light'</span> <span class="token operator">?</span> <span class="token string">'#4160ff'</span> <span class="token operator">:</span> <span class="token string">'#028FA6'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†è¾¹çš„é¢œè‰²è®¾ç½®ä¸ºçº¢è‰²</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><blockquote>
<p>è™½ç„¶ç°åœ¨æŠŠç”»å¸ƒä¸Šæ‰€æœ‰çº¿çš„é¢œè‰²æ›´æ–°äº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸ªé—®é¢˜ï¼šå°±æ˜¯ä»è¿æ¥æ¡©æ‹‰å‡ºæ¥çš„é‚£ä¸ªçº¿çš„é¢œè‰²è¿˜æ²¡æœ‰æ”¹ï¼Œç”±äºè¿™ä¸ªæ‹‰å‡ºæ¥çº¿çš„é…ç½®æˆ‘æ˜¯å†™åœ¨äº†ä¸€ä¸ªå•ç‹¬çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œè¦æƒ³æ”¹è¿™ä¸ªé…ç½®é‚£å°±å¿…é¡»å¾—å†é‡æ–°åŠ è½½ç”»å¸ƒé…ç½®ï¼Œé‚£å²‚ä¸æ˜¯åˆæŠŠé—®é¢˜å¼•åˆ°é€šè¿‡åˆå§‹åŒ–ç”»å¸ƒçš„æ–¹æ³•å»æ”¹æ ·å¼äº†å—ï¼Ÿäºæ˜¯ä¹å¼€å§‹åœ¨ç¤¾åŒºæ‘‡äººï¼Œé—®é—®åˆ«äººæœ‰æ²¡æœ‰é‡åˆ°è¿‡ç±»ä¼¼çš„é—®é¢˜ï¼Œæœç„¶æœ‰ä½å¤§ä½¬è¯´å¥¹å¤§æ¦‚çŸ¥é“æˆ‘çš„éœ€æ±‚</p>
</blockquote>
<p>ç›‘å¬ä»è¿æ¥æ¡©æ‹‰å–çº¿çš„äº‹ä»¶ï¼Œç„¶åå¯¹è¿™ä¸ªedgeè¿›è¡Œæ›´æ–°é¢œè‰²å°±è¡Œäº†</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'edge:changed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> edge <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  edge<span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">'line/stroke'</span><span class="token punctuation">,</span> theme<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">===</span> <span class="token string">'light'</span> <span class="token operator">?</span> <span class="token string">'#4160ff'</span> <span class="token operator">:</span> <span class="token string">'#028FA6'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>çº¿çš„é—®é¢˜è§£å†³äº†ï¼Œç°åœ¨å¼€å§‹è®²èŠ‚ç‚¹å¦‚ä½•æ›´æ–°ã€‚æˆ‘æœ€åˆçš„æƒ³æ³•æ˜¯éå†æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œç„¶åæŠŠæ¯ä¸€ä¸ªèŠ‚ç‚¹dataé‡Œé¢çš„å›¾ç‰‡å­—æ®µæ›´æ–°ä¸‹å°±è¡Œäº†ï¼Œç„¶åå†é‡æ–°æ¸²æŸ“ä¸‹èŠ‚ç‚¹ï¼›ç„¶è€Œè¿™ä¸ªæ–¹æ³•å¹¶æ²¡æœ‰å¥æ•ˆï¼Œåè€Œè¿˜æŠ¥é”™äº†â€¦â€¦ä¸‹é¢æ˜¯æˆ‘å†™çš„åƒåœ¾ä»£ç </p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token function">watch</span><span class="token punctuation">(</span>theme<span class="token punctuation">,</span> <span class="token parameter">val</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> nodes <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  nodes<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span> img <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow keyword-if">if</span><span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token string">'light'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">img</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">img</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">img</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token string">'/operator/'</span><span class="token punctuation">,</span><span class="token string">'/operator-light/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword control-flow keyword-else">else</span> <span class="token punctuation">{</span>
       item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">img</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">img</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">img</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token string">'/operator-light/'</span><span class="token punctuation">,</span><span class="token string">'/operator/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// å†é‡æ–°æ¸²æŸ“èŠ‚ç‚¹</span>
  graph<span class="token punctuation">.</span><span class="token method function property-access">fromJSON</span><span class="token punctuation">(</span><span class="token punctuation">{</span>nodes<span class="token punctuation">,</span>edges<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>æ—¢ç„¶ä¸è¡Œï¼Œé‚£å°±å¼€å§‹ç™¾åº¦å§ï¼Œäºæ˜¯å°±å‘ç°äº†ä¸€ä¸ªæ–°çš„apiæ–¹æ³•ï¼š<a href="https://x6.antv.antgroup.com/api/mvc/model#resetcells">resetCells</a>ï¼Œè¯•äº†ä¹‹åè¡Œæ˜¯è¡Œäº†ï¼Œä½†æ˜¯æ²¡åŠæ³•æ›´æ–°çº¿ï¼Œæ›´æ–°çº¿åä¹Ÿæ˜¯æŠ¥é”™ï¼Œæ›´æ–°nodeåˆä¸æŠ¥é”™â€¦â€¦</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token function">watch</span><span class="token punctuation">(</span>theme<span class="token punctuation">,</span> <span class="token parameter">val</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> nodes <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  nodes<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span> img <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow keyword-if">if</span><span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token string">'light'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">img</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">img</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">img</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token string">'/operator/'</span><span class="token punctuation">,</span><span class="token string">'/operator-light/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword control-flow keyword-else">else</span> <span class="token punctuation">{</span>
       item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">img</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">img</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">img</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token string">'/operator-light/'</span><span class="token punctuation">,</span><span class="token string">'/operator/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// å†é‡æ–°æ¸²æŸ“èŠ‚ç‚¹</span>
  graph<span class="token punctuation">.</span><span class="token method function property-access">resetCells</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
  graph<span class="token punctuation">.</span><span class="token method function property-access">resetCells</span><span class="token punctuation">(</span>edges<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¼€å§‹æŠ¥é”™äº†</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>æœ€åæˆ‘åˆæŠŠé¡µé¢ä»£ç é‡æ–°çœ‹äº†ä¸€éï¼Œçœ‹åˆ°äº†ä¹‹å‰å†™çš„ä¸€æ®µæ›´æ–°èŠ‚ç‚¹çš„ä»£ç ï¼Œåˆ°æ­¤æ‰æç„¶å¤§æ‚Ÿï¼Œè‡ªå·±ä¸€ç›´æƒ³çš„æ˜¯æ›´æ–°èŠ‚ç‚¹ã€æ›´æ–°èŠ‚ç‚¹ã€æ›´æ–°èŠ‚ç‚¹ï¼Œä½†æ˜¯å°±æ²¡æƒ³åˆ°ç”¨èŠ‚ç‚¹æ›´æ–°çš„apiæ¥åšï¼Œå”‰â€¦â€¦ï¼Œäºæ˜¯å°±æœ‰äº†ä¸‹é¢è¿™æ®µç»ˆæä»£ç </p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token function">watch</span><span class="token punctuation">(</span>theme<span class="token punctuation">,</span> <span class="token parameter">val</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> edges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getEdges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  edges<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    item<span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">'line/stroke'</span><span class="token punctuation">,</span> val <span class="token operator">===</span> <span class="token string">'light'</span> <span class="token operator">?</span> <span class="token string">'#4160ff'</span> <span class="token operator">:</span> <span class="token string">'#028FA6'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†è¾¹çš„é¢œè‰²è®¾ç½®ä¸ºçº¢è‰²</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-const">const</span> nodes <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  nodes<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span> img <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-const">const</span> themeIcon <span class="token operator">=</span>
      img <span class="token operator">&amp;&amp;</span>
      img<span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span>
        val <span class="token operator">===</span> <span class="token string">'light'</span> <span class="token operator">?</span> <span class="token string">'/operator/'</span> <span class="token operator">:</span> <span class="token string">'/operator-light/'</span><span class="token punctuation">,</span>
        val <span class="token operator">===</span> <span class="token string">'light'</span> <span class="token operator">?</span> <span class="token string">'/operator-light/'</span> <span class="token operator">:</span> <span class="token string">'/operator/'</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    item<span class="token punctuation">.</span><span class="token method function property-access">updateData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">img</span><span class="token operator">:</span> themeIcon <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><hr>
<h2 id="ï¸--åˆ—è¡¨æ¸²æŸ“å¤šä¸ªç”»å¸ƒ">ğŸ–¼ï¸ | åˆ—è¡¨æ¸²æŸ“å¤šä¸ªç”»å¸ƒ </h2>
<h3 id="åœºæ™¯-2">åœºæ™¯ </h3>
<p>é—®é¢˜å‘ç”Ÿçš„æºå¤´è¿˜æ˜¯æ¢è‚¤ï¼Œåˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼è¦æ˜¾ç¤ºæµ…è‰²é£æ ¼çš„ç”»å¸ƒå’ŒèŠ‚ç‚¹ï¼›å¦‚æœé—®é¢˜åˆ°è¿™å°±ç»“æŸäº†ä¹Ÿè¿˜å¥½ï¼Œé‚£æˆ‘ç›´æ¥åŠ è½½ä¸åŒçš„é…ç½®å°±è¡Œäº†ï¼Œç„¶è€Œé—®é¢˜å¹¶æ²¡æœ‰å¦‚æ­¤ç®€å•â€¦â€¦<br>
æˆ‘çš„ä¸šåŠ¡åœºæ™¯ï¼šåœ¨ä¿å­˜æ¨¡å‹çš„æ—¶å€™ï¼Œå‰ç«¯ä¼šé¡ºå¸¦ç€ä¸€ä¸ªæ¨¡å‹çš„<strong>æˆªå›¾</strong>ç»™åç«¯ï¼Œè€Œè¿™ä¸ªæˆªå›¾çš„ä½œç”¨ä»…ä»…æ˜¯åˆ—è¡¨å±•ç¤ºä½¿ç”¨ï¼Œå…¶å®ƒä¸€æ— æ˜¯å¤„ï¼Œä½†æ˜¯æ¢è‚¤çš„æ—¶å€™å¾—æŠŠè¿™ä¸ªæˆªå›¾æ¢æˆæµ…è‰²æ¨¡å¼çš„æˆªå›¾ï¼Œè€Œä¸”æˆªå›¾é‡Œé¢çš„èŠ‚ç‚¹ä¹Ÿå¾—æ˜¯æµ…è‰²æ¨¡å¼çš„ï¼Œé—®é¢˜åˆ°è¿™é‡Œæ˜¯ä¸æ˜¯è§‰å¾—æœ‰ç‚¹è’å”ï¼Œæ˜¯çš„ï¼Œå°±æ˜¯è¿™ä¹ˆè’å”ï¼Œæ­¤æ—¶æˆªå›¾å·²ç»ç”Ÿæˆä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šäº†ï¼Œæˆ‘è¦æ’ä¸Šç¿…è†€å»æ”¹æœåŠ¡å™¨ä¸Šçš„èµ„æºå—ï¼Ÿä¸ä¸ä¸~</p>
<h3 id="è§£å†³æ–¹æ³•-4">è§£å†³æ–¹æ³• </h3>
<p>ç›´æ¥æ¸²æŸ“å¤šä¸ªç”»å¸ƒï¼Œä¹Ÿå°±æ˜¯è¯´åç«¯è¿”å›å¤šå°‘çš„åˆ—è¡¨ï¼Œæˆ‘è¿™é‡Œå°±æ¸²æŸ“å¤šå°‘ä¸ªç”»å¸ƒï¼Œä¸è¿‡è¿™é‡Œè¦è¯´ä¸‹ï¼Œæ¯ä¸€æ¡æ•°æ®å¯¹åº”çš„èŠ‚ç‚¹æ•°æ®è¦åç«¯è¿”å›ç»™å‰ç«¯ï¼Œè€Œä¸æ˜¯å‰ç«¯æ‹¿ç€æ¯ä¸€æ¡è®°å½•çš„idå»æŒ¨ä¸ªæŸ¥è¯¢</p>
<pre data-role="codeBlock" data-info="html" class="language-html html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in list<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- è¿™ä¸ªæ˜¯ç”»å¸ƒå®¹å™¨ï¼Œè®°å¾—è®¾ç½®å®½é«˜ --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>graph-' + item.id<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>model-img<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token doc-comment comment">/**
 * ç”»å¸ƒåˆå§‹åŒ–é…ç½®
 * <span class="token keyword keyword-@param">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">idsï¼šè¿™ä¸ªæ˜¯æˆ‘ä»åç«¯åˆ—è¡¨é‡Œé¢å–çš„idå”¯ä¸€å€¼ç»™ç”»å¸ƒå®¹å™¨idèµ‹å€¼çš„</span>
 */</span>
<span class="token keyword keyword-let">let</span> allGraph <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword keyword-const">const</span> <span class="token function-variable function">initGraph</span> <span class="token operator">=</span> <span class="token parameter">ids</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  ids<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-let">let</span> form <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'graph-'</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
      <span class="token spread operator">...</span>graphConfig <span class="token comment">// è¿™ä¸ªå°±æ˜¯æœ‰å…³ç”»å¸ƒçš„ä¸€äº›åŸºç¡€é…ç½®</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    allGraph<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'graph &gt;&gt;&gt;'</span><span class="token punctuation">,</span> allGraph<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token comment">// èŠ‚ç‚¹æ¸²æŸ“åˆ°å¯¹åº”çš„ç”»å¸ƒä¸Š</span>
<span class="token keyword keyword-const">const</span> <span class="token function-variable function">handleNodeData</span> <span class="token operator">=</span> <span class="token parameter">nodes</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-let">let</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> nodes<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–æ¯ä¸€ä¸ªæ¨¡å‹å¯¹åº”çš„èŠ‚ç‚¹æ•°æ®</span>
    <span class="token keyword keyword-const">const</span> nodeList <span class="token operator">=</span> nodes<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">nodeVoList</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'nodeList &gt;&gt;&gt;&gt;'</span><span class="token punctuation">,</span> nodeList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-let">let</span> tempNodes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-let">let</span> tempEdges <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-let">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nodeList<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword keyword-let">let</span> item <span class="token operator">=</span> nodeList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      tempNodes<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span> <span class="token comment">// èŠ‚ç‚¹id</span>
        <span class="token literal-property property">shape</span><span class="token operator">:</span> <span class="token string">'cu-data-node'</span><span class="token punctuation">,</span> <span class="token comment">// è‡ªå®šä¹‰èŠ‚ç‚¹çš„åç§°</span>
        <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token known-class-name class-name">Number</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token property-access">xindex</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// xè½´åæ ‡</span>
        <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token known-class-name class-name">Number</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token property-access">yindex</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// yè½´åæ ‡</span>
        <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// é»˜è®¤å®½åº¦</span>
        <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token comment">// é»˜è®¤é«˜åº¦</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">,</span> <span class="token comment">// èŠ‚ç‚¹åç§°</span>
          <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// æ•°æ®é‡</span>
          <span class="token literal-property property">opType</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token property-access">opType</span><span class="token punctuation">,</span> <span class="token comment">// ç®—å­ç±»å‹</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">,</span> <span class="token comment">// 1æ•°æ®æº 2ç®—å­</span>
          <span class="token literal-property property">img</span><span class="token operator">:</span> <span class="token function">getNodeImg</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token property-access">opType</span><span class="token punctuation">)</span> <span class="token comment">// å›¾æ ‡</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// èŠ‚ç‚¹çš„è¿æ¥æ¡©</span>
        <span class="token literal-property property">ports</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token spread operator">...</span>port<span class="token punctuation">,</span>
          <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> <span class="token literal-property property">group</span><span class="token operator">:</span> <span class="token string">'left'</span><span class="token punctuation">,</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'port-left'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token literal-property property">group</span><span class="token operator">:</span> <span class="token string">'right'</span><span class="token punctuation">,</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'port-right'</span> <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// è¿çº¿æ•°æ®å¤„ç†</span>
      <span class="token keyword keyword-let">let</span> preIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token property-access">preNodeIds</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span><span class="token property-access">preNodeIds</span> <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        preIds <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">preNodeIds</span><span class="token punctuation">.</span><span class="token method function property-access">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword keyword-let">let</span> nextIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token property-access">nextNodeIds</span> <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span><span class="token property-access">nextNodeIds</span> <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nextIds <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">nextNodeIds</span><span class="token punctuation">.</span><span class="token method function property-access">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>preIds<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tempEdges <span class="token operator">=</span> <span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token keyword module keyword-from">from</span><span class="token punctuation">(</span><span class="token keyword keyword-new">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>tempEdges<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token property-access">stringify</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token property-access">parse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        preIds<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
          tempEdges<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">cell</span><span class="token operator">:</span> v<span class="token punctuation">,</span> <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">'port-right'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">cell</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span> <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">'port-left'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">attrs</span><span class="token operator">:</span> edgeAttrs
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>nextIds<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tempEdges <span class="token operator">=</span> <span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token keyword module keyword-from">from</span><span class="token punctuation">(</span><span class="token keyword keyword-new">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>tempEdges<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token property-access">stringify</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token property-access">parse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        nextIds<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
          tempEdges<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">cell</span><span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span> <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">'port-right'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">cell</span><span class="token operator">:</span> v<span class="token punctuation">,</span> <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">'port-left'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">attrs</span><span class="token operator">:</span> edgeAttrs
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      allGraph<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">fromJSON</span><span class="token punctuation">(</span><span class="token function">useDagLayout</span><span class="token punctuation">(</span>tempNodes<span class="token punctuation">,</span> tempEdges<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// allGraph[n].fromJSON({ nodes: tempNodes, edges: tempEdges });</span>
      allGraph<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">zoomTo</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      allGraph<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">centerContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'å¤„ç†åçš„èŠ‚ç‚¹æ•°æ® &gt;&gt;&gt;'</span><span class="token punctuation">,</span> tempNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'å¤„ç†åçš„edgeæ•°æ® &gt;&gt;&gt;'</span><span class="token punctuation">,</span> tempEdges<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="æˆªå›¾">æˆªå›¾ </h3>
<h4 id="darkæ¨¡å¼">darkæ¨¡å¼ </h4>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/2578582/1704432574789-3ceb8fa7-d58c-44b8-a8ce-fdbf5c3351cc.png#averageHue=%23061b1f&amp;clientId=ud1bf8639-3bca-4&amp;from=paste&amp;height=177&amp;id=u4359b684&amp;originHeight=266&amp;originWidth=1210&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=26581&amp;status=done&amp;style=none&amp;taskId=uf3f77e53-75c7-4ce7-90f0-67dc21db9bd&amp;title=&amp;width=806.6666666666666" alt="image.png"></p>
<h4 id="lightæ¨¡å¼">lightæ¨¡å¼ </h4>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/2578582/1704432598876-78f502d5-6dc1-4e89-b240-7afe0bba78b8.png#averageHue=%23d2dbdc&amp;clientId=ud1bf8639-3bca-4&amp;from=paste&amp;height=182&amp;id=uc95bf276&amp;originHeight=273&amp;originWidth=1185&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=21064&amp;status=done&amp;style=none&amp;taskId=ued50bf7e-2c55-454d-bdd3-b6d99b45490&amp;title=&amp;width=790" alt="image.png"></p>
<h2 id="èŠ‚ç‚¹ä½ç½®è®¡ç®—æ–¹æ³•">èŠ‚ç‚¹ä½ç½®è®¡ç®—æ–¹æ³• </h2>
<p><a href="https://x6.antv.vision/zh/docs/api/graph/coordinate">Coordinate</a></p>
<h2 id="è‡ªå®šä¹‰èŠ‚ç‚¹çš„tootipæç¤ºæ¡†">è‡ªå®šä¹‰èŠ‚ç‚¹çš„tootipæç¤ºæ¡† </h2>
<h3 id="åœºæ™¯-3">åœºæ™¯ </h3>
<blockquote>
<p>ç»ˆç©¶é—®é¢˜åŸå› è¿˜æ˜¯æŸæ–¹æ‡’çš„è¦æ­»ï¼Œæœ¬èº«èƒ½ç‚¹å¼€çš„ä¸œè¥¿ï¼Œéè¦å†æä¸€ä¸ªé¢„è§ˆçš„æ¡†ï¼Œè€Œä¸”è¿™ä¸ªåŠŸèƒ½å°±æ˜¯ä¸ªç”»è›‡æ·»è¶³èˆ¬çš„å­˜åœ¨ã€‚ä½†æ˜¯åŠŸèƒ½è¿˜æ˜¯è¦åšï¼Œç”±äºæ¯ä¸ªè¿ç®—èŠ‚ç‚¹éƒ½ä¸ä¸€è‡´ï¼Œå¯¼è‡´æˆ‘è¿˜å¾—æ‹†åˆ†æˆä¸åŒçš„é¢„è§ˆç»„ä»¶å»å±•ç¤ºä¸åŒèŠ‚ç‚¹çš„æ•°æ®ï¼ˆæ•°æ®æ ¼å¼ä¹Ÿæ˜¯ä¸ä¸€è‡´çš„ï¼‰</p>
</blockquote>
<h3 id="è§£å†³æ–¹æ¡ˆvue3">è§£å†³æ–¹æ¡ˆ(vue3) </h3>
<blockquote>
<p>è¿™ä¸ªæ–¹æ¡ˆä»…æ¼”ç¤ºæˆ‘ä¸šåŠ¡é‡Œé¢çš„ï¼Œå…¶å®ƒçš„åº”è¯¥éƒ½å¤§åŒå°å¼‚</p>
</blockquote>
<p>å› ä¸ºæ˜¯å¤šä¸ªç»„ä»¶ï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨åŠ¨æ€ç»„ä»¶çš„æ ‡ç­¾<code>&lt;component/&gt;</code></p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token doc-comment comment">/**
showPageViewï¼šæ§åˆ¶é¢„è§ˆç»„ä»¶çš„æ˜¾ç¤º/éšè—
posï¼šèŠ‚ç‚¹çš„åæ ‡
config-dataï¼šä¼ é€’ç»™é¢„è§ˆç»„ä»¶çš„æ•°æ®
viewDomï¼šä½ å¼•å…¥çš„é¢„è§ˆé¡µé¢çš„ç»„ä»¶ï¼ˆæ•°ç»„ç±»å‹ï¼Œæ¯”å¦‚ï¼š[ViewComponent1,ViewComponent2â€¦â€¦]ï¼‰
viewCurrentï¼šå½“å‰é¢„è§ˆçš„èŠ‚ç‚¹(èŠ‚ç‚¹çš„ç±»å‹)
viewMouseMoveï¼šç›‘å¬é¼ æ ‡æ˜¯å¦ç§»å…¥äº†é¢„è§ˆçš„tootipæ¡†é‡Œé¢äº†
*/</span>

<span class="token operator">&lt;</span>component
  <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">"viewDom[viewCurrent]"</span>
  v<span class="token operator">-</span><span class="token keyword control-flow keyword-if">if</span><span class="token operator">=</span><span class="token string">"showPageView"</span>
  <span class="token operator">:</span>pos<span class="token operator">=</span><span class="token string">"cardPos"</span>
  <span class="token operator">:</span>config<span class="token operator">-</span>data<span class="token operator">=</span><span class="token string">"configData"</span>
  @mousemove<span class="token operator">=</span><span class="token string">"viewMouseMove"</span>
  @mouseleave<span class="token operator">=</span>"
  showPageView <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  isMoveView <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
"<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span>
</code></pre><p>èŠ‚ç‚¹é¼ æ ‡ç§»å…¥ç§»å‡ºçš„å†™æ³•</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>  <span class="token comment">// èŠ‚ç‚¹é¼ æ ‡ç§»å…¥äº‹ä»¶</span>
  graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'node:mouseenter'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> e<span class="token punctuation">,</span> node <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-const">const</span> pos <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token method function property-access">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è®¡ç®—å½“å‰èŠ‚ç‚¹çš„ç±»å‹</span>
    viewCurrent<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>opType<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–åæ ‡</span>
    <span class="token keyword keyword-const">const</span> pos1 <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">localToPage</span><span class="token punctuation">(</span>pos<span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">,</span> pos<span class="token punctuation">.</span><span class="token property-access">y</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'pos1pos1pos1  &gt;&gt;&gt;'</span><span class="token punctuation">,</span> pos1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ä¼ é€’åæ ‡æ•°æ®ç»™é¢„è§ˆçš„å­ç»„ä»¶</span>
    cardPos<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">left</span><span class="token operator">:</span> pos1<span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">,</span> <span class="token literal-property property">top</span><span class="token operator">:</span> pos1<span class="token punctuation">.</span><span class="token property-access">y</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// è¿™ä¸ªæ˜¯ä¼ é€’ç»™é¢„è§ˆç»„ä»¶çš„æ•°æ®</span>
    configData<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span>operatorConfiguration <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// ç§»å…¥å°±å±•ç¤ºå¯¹åº”çš„tooltip</span>
    showPageView<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// èŠ‚ç‚¹é¼ æ ‡ç¦»å¼€äº‹ä»¶</span>
  graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'node:mouseleave'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ·»åŠ å»¶æ—¶å…³é—­ï¼Œè§£å†³é¼ æ ‡å¯ä»¥ç§»å…¥åˆ°tooltipæç¤ºæ¡†å†…éƒ¨</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isMoveView<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        showPageView<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>viewMouseMove çš„å†™æ³•</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token doc-comment comment">/**
 * é¼ æ ‡ç§»å…¥é¢„è§ˆå†…å®¹åŒºåŸŸ
 */</span>
<span class="token keyword keyword-const">const</span> <span class="token function-variable function">viewMouseMove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  isMoveView<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>:::warning<br>
æ³¨æ„ï¼šä»¥ä¸Šæ–¹æ¡ˆæ˜¯æ‰‹å†™tooltipå®ç°ï¼Œä¸åŒåˆ†è¾¨ç‡ä¸‹tooltipçš„ä½ç½®å¯èƒ½ä¼šå­˜åœ¨åç§»ï¼Œæ‰€ä»¥æœ€ç¨³å¦¥çš„æ–¹æ³•è¿˜æ˜¯å€ŸåŠ©ä¸€äº›æ’ä»¶æˆ–è€…ç¬¬ä¸‰æ–¹çš„uiç»„ä»¶åº“é…åˆvueèŠ‚ç‚¹çš„æ–¹å¼è¿›è¡Œå®ç°<br>
:::</p>
<hr>
<h2 id="è‡ªå®šä¹‰htmlèŠ‚ç‚¹çš„ä½¿ç”¨">è‡ªå®šä¹‰htmlèŠ‚ç‚¹çš„ä½¿ç”¨ </h2>
<p><a href="https://x6.antv.antgroup.com/tutorial/intermediate/html">htmlèŠ‚ç‚¹æ–‡æ¡£</a></p>
<h3 id="å¦‚ä½•æ³¨å†Œ">å¦‚ä½•æ³¨å†Œï¼Ÿ </h3>
<ol>
<li>å¯¼å…¥<code>Shape</code>æ’ä»¶</li>
</ol>
<p><code>import { Shape } from '@antv/x6'</code></p>
<ol start="2">
<li>æ³¨å†ŒhtmlèŠ‚ç‚¹</li>
</ol>
<p><code>effect:['data']</code>å±æ€§çš„ä½œç”¨æ˜¯ç›‘å¬èŠ‚ç‚¹çš„dataæ•°æ®å˜åŒ–ååŠæ—¶æ›´æ–°htmlçš„å†…å®¹<br>
å¯¹äºæˆ‘è¿™é‡Œä¸ºä»€ä¹ˆæŠŠèŠ‚ç‚¹å›¾ç‰‡åœ°å€è½¬æˆbase64çš„é—®é¢˜å¯ä»¥çœ‹ä¸‹è¿™ç¯‡æ–‡æ¡£<a href="https://www.yuque.com/sxd_panda/antv/export">ä¼ é€é—¨</a></p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>  <span class="token comment">// æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹ å›¾æ ‡+æ ‡é¢˜+æè¿°</span>
  <span class="token maybe-class-name">Shape</span><span class="token punctuation">.</span><span class="token constant">HTML</span><span class="token punctuation">.</span><span class="token method function property-access">register</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">shape</span><span class="token operator">:</span> <span class="token string">'cu-data-node'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">104</span><span class="token punctuation">,</span>
    <span class="token literal-property property">zIndex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">effect</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">html</span><span class="token punctuation">(</span><span class="token parameter">cell</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è·å–èŠ‚ç‚¹ä¼ é€’è¿‡æ¥çš„æ•°æ®</span>
      <span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> img<span class="token punctuation">,</span> desc<span class="token punctuation">,</span> opType <span class="token punctuation">}</span> <span class="token operator">=</span> cell<span class="token punctuation">.</span><span class="token method function property-access">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// åˆ›å»ºè‡ªå®šä¹‰çš„èŠ‚ç‚¹å®¹å™¨</span>
      <span class="token keyword keyword-const">const</span> container <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      container<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'cu-container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// å›¾ç‰‡æ ¹æ®ä¸åŒçš„ç±»å‹è¿›è¡Œåˆ‡æ¢ï¼Œå¯ä»¥æ˜¯åç«¯è¿”å›çš„å›¾æ ‡ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå·±æœ¬åœ°çš„å›¾æ ‡ï¼Œå¦‚æœæ˜¯åç«¯è¿”å›å°±é€šè¿‡èŠ‚ç‚¹çš„dataä¼ è¿›æ¥</span>
      <span class="token keyword keyword-const">const</span> container_img <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      container_img<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'cu-container-img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      container_img<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'alt'</span><span class="token punctuation">,</span> <span class="token string">'èŠ‚ç‚¹ico'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      container_img<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">cursor</span> <span class="token operator">=</span> <span class="token string">'pointer'</span><span class="token punctuation">;</span>
      <span class="token comment">// å…ˆç”¨è¿œç¨‹å›¾ç‰‡åœ°å€ç»™å›¾ç‰‡çš„srcèµ‹å€¼ï¼Œç„¶åå†é‡æ–°èµ‹å€¼æˆbase64çš„æ ¼å¼ï¼›è¿™ä¹ˆåšçš„ç›®çš„å°±æ˜¯è§£å†³èŠ‚ç‚¹æ‹–æ‹½åˆ°ç”»å¸ƒä¸Šä¼šå‡ºç°çŸ­æš‚çš„è¾¹æ¡†é—ªåŠ¨é—®é¢˜ï¼Œå¦‚æœä½ è¦å¤ç°è¿™ä¸ªè¾¹æ¡†ï¼Œå¯ä»¥æŠŠä¸‹é¢è¿™ä¸€è¡Œä»£ç æ³¨æ‰ï¼ˆä¸æ˜¯å¿…ç°ï¼‰</span>
      <span class="token comment">// const icon = img ? img : remoteImgUrl.value;</span>
      container_img<span class="token punctuation">.</span><span class="token property-access">src</span> <span class="token operator">=</span> img<span class="token punctuation">;</span>
      <span class="token comment">// æŠŠå›¾ç‰‡è½¬æˆbase64æ–¹ä¾¿å­˜å‚¨åˆ°åç«¯</span>
      <span class="token maybe-class-name">DataUri</span><span class="token punctuation">.</span><span class="token method function property-access">imageToDataUri</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token keyword keyword-function">function</span> <span class="token punctuation">(</span><span class="token parameter">nu<span class="token punctuation">,</span> url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ— æ•ˆï¼Œç”¨çš„åªæ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ä¸å†™ç”±ä¸è¡Œ</span>
        container_img<span class="token punctuation">.</span><span class="token property-access">src</span> <span class="token operator">=</span> url<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// container_img.src = img ? img : `${import.meta.env.VITE_IMG_PREFIX}/zfc-images/operator/datasouce.png`;</span>

      <span class="token keyword keyword-const">const</span> container_title <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      container_title<span class="token punctuation">.</span><span class="token property-access">innerText</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
      container_title<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'cu-container-title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span> container_title<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword keyword-const">const</span> container_desc <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      container_desc<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'cu-container-desc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// ç®—å­é…ç½®ä¸éœ€è¦æè¿°ä¿¡æ¯</span>
      container_desc<span class="token punctuation">.</span><span class="token property-access">innerText</span> <span class="token operator">=</span> opType <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">?</span> <span class="token string">'(å…±'</span> <span class="token operator">+</span> desc <span class="token operator">+</span> <span class="token string">'æ¡)'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>

      container<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>container_img<span class="token punctuation">)</span><span class="token punctuation">;</span>
      container<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>container_title<span class="token punctuation">)</span><span class="token punctuation">;</span>
      container<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>container_desc<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword control-flow keyword-return">return</span> container<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨ï¼Ÿ </h3>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>  <span class="token keyword keyword-const">const</span> node <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">createNode</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">shape</span><span class="token operator">:</span> <span class="token string">'cu-data-node'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">104</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> data<span class="token operator">?.</span>name<span class="token punctuation">,</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> data<span class="token operator">?.</span>id<span class="token punctuation">,</span>
    <span class="token comment">// æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®æºå¤´éƒ½åœ¨è¿™é‡Œè®¾ç½®ï¼Œéœ€è¦å“ªäº›å­—æ®µè‡ªè¡Œæ·»åŠ å³å¯</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> data<span class="token operator">?.</span>name<span class="token punctuation">,</span> <span class="token comment">// èŠ‚ç‚¹çš„åç§°</span>
      <span class="token literal-property property">img</span><span class="token operator">:</span> data<span class="token operator">?.</span>img <span class="token operator">||</span> remoteImgUrl<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">,</span> <span class="token comment">// å›¾æ ‡</span>
      <span class="token literal-property property">desc</span><span class="token operator">:</span> data<span class="token operator">?.</span>dataNum <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// æ€»æ•°æ®æè¿°</span>
      â€¦â€¦
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token doc-comment comment">/**
     * è¿æ¥æ¡©ä½ç½®åˆ¤æ–­é€»è¾‘
     * 1ã€æ•°æ®æºç±»å‹çš„è¿æ¥æ¡©åªæ˜¾ç¤ºå³ä¾§
     * 2ã€ç®—å­ç±»å‹çš„è¿æ¥æ¡©æ˜¾ç¤ºå·¦å³ä¸¤ä¾§
     * 3ã€ç®—å­ç±»å‹-å…³è”å›å¡«çš„è¿æ¥æ¡©æ˜¾ç¤ºå·¦ä¾§
     */</span>
    <span class="token literal-property property">ports</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token spread operator">...</span>port
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><hr>
<h2 id="è‡ªå®šä¹‰vueèŠ‚ç‚¹çš„ä½¿ç”¨">è‡ªå®šä¹‰vueèŠ‚ç‚¹çš„ä½¿ç”¨ </h2>
<p><a href="https://x6.antv.antgroup.com/tutorial/intermediate/vue">vueèŠ‚ç‚¹æ–‡æ¡£</a></p>
<blockquote>
<p>æœ¬ç¯‡æ–‡æ¡£åªè®²è§£vue3ä¸­å¦‚ä½•ä½¿ç”¨ï¼Œvue2çš„å¯ä»¥å‚è€ƒä¸‹å®˜æ–¹æ–‡æ¡£</p>
</blockquote>
<h3 id="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶ </h3>
<p><code>@antv/x6-vue-shape</code></p>
<h3 id="æ·»åŠ vueç»„ä»¶">æ·»åŠ vueç»„ä»¶ </h3>
<blockquote>
<p>æ—¢ç„¶ä½¿ç”¨vueèŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å‡†å¤‡ä¸€ä¸ªvueçš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶å°±æ˜¯èŠ‚ç‚¹çš„ä¸€äº›æ ·å¼ï¼Œæ ¹æ®ä½ ä»¬çš„uiè‡ªè¡Œå†™ä»£ç å³å¯</p>
</blockquote>
<pre data-role="codeBlock" data-info="vue" class="language-vue vue"><code>&lt;template&gt;
  &lt;div&gt;èŠ‚ç‚¹åç§°&lt;/div&gt;
  &lt;div&gt;èŠ‚ç‚¹æè¿°&lt;/div&gt;
  â€¦â€¦
&lt;/template&gt;
</code></pre><h3 id="æ³¨å†ŒvueèŠ‚ç‚¹">æ³¨å†ŒvueèŠ‚ç‚¹ </h3>
<ol>
<li>å¯¼å…¥vueèŠ‚ç‚¹æ³¨å†Œæ’ä»¶</li>
</ol>
<p><code>import { register, getTeleport } from '@antv/x6-vue-shape';</code></p>
<ol start="2">
<li>æ³¨å†ŒèŠ‚ç‚¹</li>
</ol>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">shape</span><span class="token operator">:</span> <span class="token string">'custom-vue-node'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">104</span><span class="token punctuation">,</span>
  <span class="token literal-property property">component</span><span class="token operator">:</span> vueNode <span class="token comment">// è¿™ä¸ªå°±æ˜¯ä½ å®šä¹‰çš„vueç»„ä»¶</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><ol start="3">
<li>æ·»åŠ ä¼ é€é—¨</li>
</ol>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword module keyword-import">import</span> <span class="token imports"><span class="token punctuation">{</span> getTeleport <span class="token punctuation">}</span></span> <span class="token keyword module keyword-from">from</span> <span class="token string">'@antv/x6-vue-shape'</span><span class="token punctuation">;</span>
<span class="token keyword keyword-const">const</span> <span class="token maybe-class-name">TeleportContainer</span> <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token function">getTeleport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// template ä¸­æ·»åŠ æ ‡ç­¾ï¼Œå’Œä½ çš„ç”»å¸ƒå®¹å™¨å¹³çº§</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"graphDom"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token maybe-class-name">TeleportContainer</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre><ol start="4">
<li>ä½¿ç”¨</li>
</ol>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>  <span class="token keyword keyword-const">const</span> node <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">createNode</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">shape</span><span class="token operator">:</span> <span class="token string">'custom-vue-node'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">104</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> data<span class="token operator">?.</span>name<span class="token punctuation">,</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> data<span class="token operator">?.</span>id<span class="token punctuation">,</span>
    <span class="token comment">// æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®æºå¤´éƒ½åœ¨è¿™é‡Œè®¾ç½®ï¼Œéœ€è¦å“ªäº›å­—æ®µè‡ªè¡Œæ·»åŠ å³å¯</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> data<span class="token operator">?.</span>name<span class="token punctuation">,</span> <span class="token comment">// èŠ‚ç‚¹çš„åç§°</span>
      <span class="token literal-property property">img</span><span class="token operator">:</span> data<span class="token operator">?.</span>img <span class="token operator">||</span> remoteImgUrl<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">,</span> <span class="token comment">// å›¾æ ‡</span>
      <span class="token literal-property property">desc</span><span class="token operator">:</span> data<span class="token operator">?.</span>dataNum <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// æ€»æ•°æ®æè¿°</span>
      â€¦â€¦
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token doc-comment comment">/**
     * è¿æ¥æ¡©ä½ç½®åˆ¤æ–­é€»è¾‘
     * 1ã€æ•°æ®æºç±»å‹çš„è¿æ¥æ¡©åªæ˜¾ç¤ºå³ä¾§
     * 2ã€ç®—å­ç±»å‹çš„è¿æ¥æ¡©æ˜¾ç¤ºå·¦å³ä¸¤ä¾§
     * 3ã€ç®—å­ç±»å‹-å…³è”å›å¡«çš„è¿æ¥æ¡©æ˜¾ç¤ºå·¦ä¾§
     */</span>
    <span class="token literal-property property">ports</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token spread operator">...</span>port
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="èŠ‚ç‚¹å†…éƒ¨ç›‘å¬æ•°æ®å˜åŒ–">èŠ‚ç‚¹å†…éƒ¨ç›‘å¬æ•°æ®å˜åŒ– </h3>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-const">const</span> getNodeData <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'getNode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> currentNode <span class="token operator">=</span> <span class="token function">getNodeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ç›‘å¬å½“å‰èŠ‚ç‚¹æ•°æ®å‘ç”Ÿäº†å˜åŒ–</span>
  currentNode<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'change:data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> current <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'èŠ‚ç‚¹æ•°æ®æ˜¯å¦å‘ç”Ÿå˜åŒ–äº† &gt;&gt;&gt;'</span><span class="token punctuation">,</span> current<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h3 id="vueèŠ‚ç‚¹æ‹–æ‹½çš„æ—¶å€™æŠ¥é”™">vueèŠ‚ç‚¹æ‹–æ‹½çš„æ—¶å€™æŠ¥é”™ï¼Ÿ </h3>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/2578582/1715161582677-71762bbd-ddeb-425c-870f-da649b480e2d.png#averageHue=%23fbf0d9&amp;clientId=ueef1645c-9ec3-4&amp;from=paste&amp;height=494&amp;id=u030e6c88&amp;originHeight=741&amp;originWidth=1422&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=164899&amp;status=done&amp;style=none&amp;taskId=u92889cff-a972-4350-8e4f-53cb48f31b2&amp;title=&amp;width=948" alt="image.png"><br>
æ£€æŸ¥ä½ çš„vueç»„ä»¶æ˜¯å¦æ˜¯è¿™ç§ç»“æ„</p>
<pre data-role="codeBlock" data-info="html" class="language-html html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>å†…å®¹ï¼š{{ dataNode.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n-badge</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n-avatar</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vueIco<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>n-avatar</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>n-badge</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>éœ€è¦æ”¹æˆä¸‹é¢è¿™ç§çš„ç»“æ„(éœ€è¦ç”¨æ ¹èŠ‚ç‚¹è¿›è¡ŒåŒ…è£¹)</p>
<pre data-role="codeBlock" data-info="html" class="language-html html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>å†…å®¹ï¼š{{ dataNode.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n-badge</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n-avatar</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vueIco<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>n-avatar</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>n-badge</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><hr>
<h2 id="èŠ‚ç‚¹äº‹ä»¶å’ŒvueèŠ‚ç‚¹å†…çš„clickäº‹ä»¶å†²çªé—®é¢˜">èŠ‚ç‚¹äº‹ä»¶å’ŒvueèŠ‚ç‚¹å†…çš„clickäº‹ä»¶å†²çªé—®é¢˜ </h2>
<h3 id="åœºæ™¯-4">åœºæ™¯ </h3>
<blockquote>
<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯vueç±»å‹çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿™é‡Œå°±æŒ‰ç…§vueèŠ‚ç‚¹æ¥è¿›è¡Œè®²è§£ï¼Œå…¶å®ƒçš„èŠ‚ç‚¹(Reactã€Angularã€Html)è¿™äº›éƒ½æ˜¯é€šç”¨çš„ã€‚</p>
</blockquote>
<blockquote>
<p>åœ¨vueèŠ‚ç‚¹å†…éƒ¨çš„æŸä¸ªå…ƒç´ ä¸Šéœ€è¦æ‰§è¡Œä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œæœ¬äº‹ä»¶çš„æ—¶å€™ä¸èƒ½å»è§¦å‘<code>node:click</code>çš„äº‹ä»¶ã€åœ¨æ‰§è¡Œ<code>node:click</code>äº‹ä»¶çš„æ—¶å€™ä¸èƒ½è§¦å‘vueèŠ‚ç‚¹çš„ç‚¹å‡»äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸¤è¾¹çš„äº‹ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œè°ä¹Ÿä¸èƒ½å½±å“è°ï¼Œè€Œä¸”vueèŠ‚ç‚¹å†…çš„ç‚¹å‡»äº‹ä»¶åœ¨ç‚¹å‡»çš„æ—¶å€™è¿˜å¾—è·å–å½“å‰èŠ‚ç‚¹ä¿¡æ¯</p>
</blockquote>
<h3 id="è¸©å‘æ–¹æ¡ˆ1">è¸©å‘æ–¹æ¡ˆ1 </h3>
<p>ç›´æ¥ç»™vueçš„ç‚¹å‡»äº‹ä»¶æ·»åŠ <code>stop</code>ä¿®é¥°ç¬¦ï¼Œé˜»æ­¢äº‹ä»¶ä¼ é€’ï¼Œç„¶ååœ¨<code>node:click</code>çš„æ—¶å€™å†é˜»æ­¢ä¸‹ï¼Œä½†æ˜¯ç»“æœä¸‹æ¥ç¡®æ˜¯ä¸è¡Œâ€¦â€¦</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token comment">// vueèŠ‚ç‚¹çš„äº‹ä»¶</span>
@click<span class="token punctuation">.</span><span class="token property-access">stop</span> <span class="token operator">=</span> test

<span class="token comment">// çˆ¶é¡µé¢çš„èŠ‚ç‚¹èŠ‚ç‚¹äº‹ä»¶</span>
graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'node:click'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>e<span class="token punctuation">}</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token method function property-access">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h3 id="è¸©å‘æ–¹æ¡ˆ2">è¸©å‘æ–¹æ¡ˆ2 </h3>
<p>é‡‡ç”¨ç¾¤é‡Œå°ä¼™ä¼´çš„æ–¹æ¡ˆï¼Œé˜»æ­¢èŠ‚ç‚¹é¼ æ ‡æŒ‰ä¸‹æˆ–è€…é¼ æ ‡æŠ¬èµ·çš„äº‹ä»¶ï¼Œè¿™æ ·å¯ä»¥å®ç°åœ¨ç‚¹å‡»vueèŠ‚ç‚¹çš„æ—¶å€™ä¸è§¦å‘èŠ‚ç‚¹æœ¬èº«çš„<code>node:click</code>äº‹ä»¶ï¼Œè™½ç„¶å¯ä»¥å®ç°é˜»æ­¢çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸å¥½æ“ä½œèŠ‚ç‚¹çš„æ•°æ®ï¼Œæˆ‘æ˜¯éœ€è¦è·å–å½“å‰èŠ‚ç‚¹çš„æ•°æ®çš„</p>
<h3 id="ç»ˆæè§£å†³æ–¹æ¡ˆ">ç»ˆæè§£å†³æ–¹æ¡ˆ </h3>
<p>é€šè¿‡è·å–clickäº‹ä»¶çš„ç‚¹å‡»åŒºåŸŸè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ˜¯ç‚¹å‡»äº†vueèŠ‚ç‚¹å†…çš„ç‚¹å‡»äº‹ä»¶åŒºåŸŸï¼Œå°±ç›´æ¥åœ¨node:clickçš„æ—¶å€™é˜»æ­¢æ‰å°±è¡Œäº†</p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'node:click'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>e<span class="token punctuation">}</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// åˆ¤æ–­targetçš„classNameæˆ–è€…idï¼Œæˆ–è€…ä½ å®šä¹‰çš„ä¸€äº›è‡ªå®šä¹‰å±æ€§ï¼Œ</span>
  <span class="token comment">// åæ­£åªè¦ä½ èƒ½çŸ¥é“å½“å‰ç‚¹å‡»çš„åŒºåŸŸæ˜¯å±äºè°çš„å°±è¡Œ</span>
  <span class="token comment">// æˆ‘åœ¨vueèŠ‚ç‚¹ç‚¹å‡»äº‹ä»¶çš„æ ‡ç­¾ä¸ŠåŠ äº†ä¸ªclass</span>
  <span class="token keyword control-flow keyword-if">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">==</span> <span class="token string">'cu-class'</span><span class="token punctuation">)</span> <span class="token keyword control-flow keyword-return">return</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><hr>
<h2 id="vueèŠ‚ç‚¹æ•°æ®å¦‚ä½•åå‘ä¼ é€’ç»™çˆ¶ç»„ä»¶vue3">vueèŠ‚ç‚¹æ•°æ®å¦‚ä½•åå‘ä¼ é€’ç»™çˆ¶ç»„ä»¶(vue3)ï¼Ÿ </h2>
<p>æçš„issuesï¼š<a href="https://github.com/antvis/X6/issues/4323">https://github.com/antvis/X6/issues/4323</a> ï¼ˆè¿™é‡Œé¢æœ‰vue2çš„è§£å†³æ–¹æ¡ˆï¼‰</p>
<blockquote>
<p>è¿™ä¸ªé—®é¢˜è¿˜å¾…è§£å†³ï¼Œå®˜æ–¹æš‚æ—¶æ²¡æœ‰ä»»ä½•ç­”å¤ï¼ŒçŸ­æœŸå†…åªèƒ½æ ¹æ®æˆ‘çš„ä¸šåŠ¡éœ€æ±‚ç”¨é‡è·¯å­å®ç°ï¼Œå¦‚æœæœ‰å…¶å®ƒçš„å¯ä»¥ç•™è¨€ä½ çš„éœ€æ±‚</p>
</blockquote>
<h3 id="åœºæ™¯-5">åœºæ™¯ </h3>
<p>vueèŠ‚ç‚¹å†…éƒ¨æœ‰ä¸€ä¸ªå¤é€‰æ¡†ï¼Œç”¨äºå‹¾é€‰èŠ‚ç‚¹ï¼Œé€‰ä¸­åè¦ç»™å½“å‰èŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªæ˜¯å¦é€‰ä¸­çš„å±æ€§ï¼Œç”±äºèŠ‚ç‚¹çš„æ•°æ®æ›´æ–°åªèƒ½åœ¨çˆ¶é¡µé¢è¿›è¡Œæ›´æ–°ï¼Œæ‰€ä»¥å¿…é¡»å¾—æŠŠå¤é€‰æ¡†ç»‘å®šçš„å€¼ä¼ é€’ç»™çˆ¶é¡µé¢</p>
<h3 id="è§£å†³æ–¹æ¡ˆ1-1">è§£å†³æ–¹æ¡ˆ1 </h3>
<blockquote>
<p>è¿™ä¸ªæ–¹æ¡ˆå±äºé‡è·¯å­ï¼Œä¸æ˜¯å¾ˆçµæ´»ï¼Œå¦‚æœä¸æ˜¯å¤é€‰æ¡†é‚£åŸºæœ¬å‡‰å‡‰äº†</p>
</blockquote>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token comment">// vueèŠ‚ç‚¹å†…æ­£å¸¸å†™å¤é€‰æ¡†ç»‘å®šçš„é€»è¾‘</span>
<span class="token keyword keyword-const">const</span> checked2 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span>el<span class="token operator">-</span>checkbox v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"checked2"</span> size<span class="token operator">=</span><span class="token string">"large"</span> @change<span class="token operator">=</span><span class="token string">"checkChange"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>



<span class="token comment">// çˆ¶ç»„ä»¶ç›‘å¬èŠ‚ç‚¹çš„ç‚¹å‡»äº‹ä»¶</span>
graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'node:click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>e<span class="token punctuation">,</span>node<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-let">let</span> state <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">checkState</span> <span class="token operator">??</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token comment">// è¿™ä¸ªåˆ¤æ–­æ˜¯ä¸ºäº†è§£å†³å¤é€‰æ¡†çš„ç‚¹å‡»äº‹ä»¶å’ŒèŠ‚ç‚¹çš„ç‚¹å‡»äº‹ä»¶å†²çªçš„é—®é¢˜</span>
    <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">==</span> <span class="token string">'el-checkbox__inner'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç»™èŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªcheckStateå±æ€§ï¼Œæ ‡è¯†æ˜¯å¦é€‰ä¸­</span>
      node<span class="token punctuation">.</span><span class="token method function property-access">updateData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">checkState</span><span class="token operator">:</span> <span class="token operator">!</span>state <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">ignoreHistory</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow keyword-return">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// æœ€åç‚¹å‡»ä¿å­˜æŒ‰é’®çš„æ—¶å€™è·å–ä¸‹èŠ‚ç‚¹checkStateä¸ºtrueçš„æ•°æ®</span>
<span class="token keyword keyword-const">const</span> <span class="token function-variable function">save</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> allNodes <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// æˆ‘è¿™é‡Œæ˜¯å–çš„idå±æ€§ï¼Œå¦‚æœä½ ä»¬éœ€è¦å…¶å®ƒçš„å¯ä»¥è‡ªè¡Œç»„è£…</span>
  checkedOps<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> allNodes<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">checkState</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'checkedOps &gt;&gt;&gt;'</span><span class="token punctuation">,</span> checkedOps<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre><h3 id="è§£å†³æ–¹æ¡ˆ2-1">è§£å†³æ–¹æ¡ˆ2 </h3>
<blockquote>
<p>è¿™ä¸ªæ–¹æ¡ˆå°±å¯ä»¥éšä¾¿ç©äº†ï¼Œä¸å†å±€é™äºæˆ‘è‡ªå·±çš„éœ€æ±‚ï¼Œå¦‚æœè¿˜è¦åœ¨èŠ‚ç‚¹ä¸ŠåŠ å…¶å®ƒçš„æ§ä»¶éƒ½å¯ä»¥å®Œç¾çš„æŠŠæ•°æ®ä¼ é€’åˆ°çˆ¶ç»„ä»¶ï¼Œå…¶çµæ„Ÿæ¥æºäºgithubçš„å°ä¼™ä¼´<a href="https://github.com/qw123gz">qw123gz</a>ï¼Œé—®å®˜æ–¹äº¤æµç¾¤çš„ç¾¤ä¸»ï¼Œé—®äº†åŠå¤©ä¹Ÿæ²¡æœ‰ç»™å‡ºæ–¹æ¡ˆâ€¦â€¦</p>
</blockquote>
<h4 id="å­ç»„ä»¶æ·»åŠ emitäº‹ä»¶">å­ç»„ä»¶æ·»åŠ emitäº‹ä»¶ </h4>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token operator">&lt;</span>el<span class="token operator">-</span>checkbox v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"checked2"</span> size<span class="token operator">=</span><span class="token string">"large"</span> @change<span class="token operator">=</span><span class="token string">"checkChange"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>


<span class="token keyword keyword-const">const</span> checked2 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-const">const</span> emits <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'getCheckVal'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-const">const</span> <span class="token function-variable function">checkChange</span> <span class="token operator">=</span> <span class="token parameter">val</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">emits</span><span class="token punctuation">(</span><span class="token string">'getCheckVal'</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="çˆ¶ç»„ä»¶æ”¹é€ æ³¨å†ŒvueèŠ‚ç‚¹çš„ä»£ç ">çˆ¶ç»„ä»¶æ”¹é€ æ³¨å†ŒvueèŠ‚ç‚¹çš„ä»£ç  </h4>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">shape</span><span class="token operator">:</span> <span class="token string">'custom-vue-node'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">104</span><span class="token punctuation">,</span>
  <span class="token comment">// component: vueNode   è¿™ä¸ªæ˜¯å®˜æ–¹æä¾›çš„æ³¨å†Œæ–¹å¼</span>
  <span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä½¿ç”¨vue3çš„renderæ¸²æŸ“ç»„ä»¶ï¼Œå¹¶æ·»åŠ è‡ªå®šä¹‰äº‹ä»¶</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow keyword-return">return</span> <span class="token function">h</span><span class="token punctuation">(</span>vueNode<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">// äº‹ä»¶åç§°å‰é¢å¿…é¡»æ·»åŠ  `on`</span>
        <span class="token function-variable function">onGetCheckVal</span><span class="token operator">:</span> <span class="token parameter">val</span> <span class="token arrow operator">=&gt;</span> <span class="token function">getMyCheckVal</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>è‡³æ­¤ï¼Œæ•°æ®åå‘ä¼ é€’å°±å®Œæˆäº†ï¼Œè‡³äºæ€ä¹ˆä½¿ç”¨ä¼ é€’è¿‡æ¥çš„æ•°æ®å°±çœ‹ä½ ä»¬çš„ä¸šåŠ¡éœ€æ±‚äº†</p>
<hr>
<h2 id="vueèŠ‚ç‚¹å†…å¦‚ä½•è·å–ç”»å¸ƒå®ä¾‹">vueèŠ‚ç‚¹å†…å¦‚ä½•è·å–ç”»å¸ƒå®ä¾‹ï¼Ÿ </h2>
<blockquote>
<p>æœ‰çš„åœºæ™¯ä¸‹æˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨vueå­ç»„ä»¶å†…æ‹¿åˆ°ç”»å¸ƒçš„å®ä¾‹ï¼Œå¦‚æœé ä»çˆ¶ç»„ä»¶ä¼ é€’ä¸‹æ¥ï¼Œå¯èƒ½ä¸å¤ªæ˜æ™ºï¼Œå…¶å®ç¿»çœ‹@antv/x6-vue-shapeçš„æºç å°±å¯ä»¥å‘ç°å®ƒæš´éœ²ä¸¤ä¸ªprovideï¼Œä¸€ä¸ªæ˜¯å®˜æ–¹æ–‡æ¡£æåˆ°çš„getNodeï¼Œå¦å¤–ä¸€ä¸ªå°±æ˜¯getGraph</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/2578582/1716797520130-fe02519a-7b2e-4416-b2ba-0bb00643e6ee.png#averageHue=%2320201f&amp;clientId=ud362e5ff-2428-4&amp;from=paste&amp;height=445&amp;id=u3fc11a4d&amp;originHeight=668&amp;originWidth=958&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=72684&amp;status=done&amp;style=none&amp;taskId=u19cfd14c-df67-4665-81b9-c98e795e5ec&amp;title=&amp;width=638.6666666666666" alt="image.png"></p>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-const">const</span> getNodeData <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'getNode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-const">const</span> getGra <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'getGraph'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="æ¡†é€‰å¦‚ä½•æ·»åŠ è¿‡æ»¤æ¡ä»¶">æ¡†é€‰å¦‚ä½•æ·»åŠ è¿‡æ»¤æ¡ä»¶ï¼Ÿ </h2>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">setSelectionFilter</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow keyword-return">return</span> node<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">checkState</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><hr>
<h2 id="ï¸--å¸¸ç”¨æ–¹æ³•é›†é”¦">ğŸ–¼ï¸ | å¸¸ç”¨æ–¹æ³•é›†é”¦ </h2>
<ol>
<li>æ¸…ç©ºç”»å¸ƒï¼š<code>graph.clearCells()</code></li>
<li>ç”»å¸ƒç¼©å°ï¼š<code>graph.zoom(-0.5)</code></li>
<li>è·å–ç”»å¸ƒç¼©æ”¾æ¯”ä¾‹ï¼š<code>graph.zoom()</code></li>
<li>è·å–ç”»å¸ƒä¸Šæ‰€æœ‰èŠ‚ç‚¹ï¼š<code>graph.getNodes()</code></li>
<li>è·å–ç”»å¸ƒä¸Šæ‰€æœ‰è¾¹ï¼š<code>graph.getEdges()</code></li>
<li>è®¾ç½®èŠ‚ç‚¹ç§»åŠ¨èŒƒå›´åœ¨ç”»å¸ƒå†…<a href="https://antv-x6.gitee.io/zh/docs/api/graph/transform/#translating">é“¾æ¥</a></li>
</ol>
<pre data-role="codeBlock" data-info="json" class="language-json json"><code>translating<span class="token operator">:</span> <span class="token punctuation">{</span>
  restrict<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><ol start="7">
<li>åŠ¨æ€è®¾ç½®èŠ‚ç‚¹ä½ç½®<a href="https://antv-x6.gitee.io/zh/docs/api/model/node#position-1">é“¾æ¥</a>ï¼š<code>node.position(x,y)</code></li>
<li>èŠ‚ç‚¹åªèƒ½è¢«ç›¸åŒçš„æºèŠ‚ç‚¹è¿æ¥ä¸€æ¬¡<a href="https://antv-x6.gitee.io/zh/docs/tutorial/basic/interacting#allowmulti">é“¾æ¥</a>ï¼š<code>allowMulti: false</code></li>
<li>ä¸¤ä¸ªèŠ‚ç‚¹è¿æ¥çš„æ—¶å€™è·å–ç›®æ ‡èŠ‚ç‚¹çš„æ•°æ®<a href="https://antv-x6.gitee.io/zh/docs/tutorial/intermediate/events#%E8%BE%B9%E8%BF%9E%E6%8E%A5%E5%8F%96%E6%B6%88%E8%BF%9E%E6%8E%A5">é“¾æ¥</a></li>
</ol>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code>graph<span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">'edge:connected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isNew<span class="token punctuation">,</span> edge<span class="token punctuation">,</span> currentCell <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// å›è°ƒçš„å‚æ•°ï¼šhttps://antv-x6.gitee.io/zh/docs/tutorial/intermediate/events/#%E8%BE%B9%E8%BF%9E%E6%8E%A5%E5%8F%96%E6%B6%88%E8%BF%9E%E6%8E%A5</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'è¢«è¿æ¥çš„èŠ‚ç‚¹è¯¦ç»†å‚æ•°'</span><span class="token punctuation">,</span> currentCell<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow keyword-if">if</span> <span class="token punctuation">(</span>currentCell<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">.</span><span class="token property-access">$modal</span><span class="token punctuation">.</span><span class="token method function property-access">msgError</span><span class="token punctuation">(</span><span class="token string">'æ•°æ®æºæ— æ³•ä½œä¸ºè¾“å‡ºèŠ‚ç‚¹'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ç§»é™¤è¿æ¥çš„è¾¹</span>
    graph<span class="token punctuation">.</span><span class="token method function property-access">removeEdge</span><span class="token punctuation">(</span>edge<span class="token operator">?.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><ol start="10">
<li>åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦è¢«è¿æ¥<a href="https://antv-x6.gitee.io/zh/docs/api/graph/model#getconnectededges">é“¾æ¥</a></li>
</ol>
<pre data-role="codeBlock" data-info="javascript" class="language-javascript javascript"><code><span class="token keyword keyword-const">const</span> node <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getCellById</span><span class="token punctuation">(</span><span class="token string">'node1'</span><span class="token punctuation">)</span>
<span class="token keyword keyword-const">const</span> connectedEdges <span class="token operator">=</span> graph<span class="token punctuation">.</span><span class="token method function property-access">getConnectedEdges</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
</code></pre><ol start="11">
<li>æ ¹æ®è¾¹è·å–èŠ‚ç‚¹ï¼š<code>edge.getSourceNode();</code></li>
<li>èŠ‚ç‚¹å®ä¾‹è½¬jsonï¼š<code>node.toJSON()</code></li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/2578582/1686119457435-59195b9d-534e-47c0-9d4b-266bccc5d638.jpeg#averageHue=%23fbfbfa&amp;clientId=u86232ec9-518c-4&amp;from=paste&amp;height=23&amp;id=u60a46656&amp;originHeight=34&amp;originWidth=1280&amp;originalType=binary&amp;ratio=1.5&amp;rotation=0&amp;showTitle=false&amp;size=4234&amp;status=done&amp;style=none&amp;taskId=ua82c9a7e-a8b4-4064-bf5b-c50965b1dee&amp;title=&amp;width=853.3333333333334" alt="7b49173b21c936862b568f83c1dae9a.jpg"></p>
<p><a href="https://x6.antv.antgroup.com/tutorial/plugins/dnd">Dndæ’ä»¶</a><br>
<a href="https://x6.antv.antgroup.com/tutorial/plugins/stencil">Stencilæ’ä»¶</a><br>
<a href="https://x6.antv.antgroup.com/tutorial/plugins/export">å›¾ç‰‡å¯¼å‡º</a><br>
<a href="https://antv-x6.gitee.io/zh/docs/tutorial/epilog#%E5%AF%BC%E5%87%BA%E5%9B%BE%E7%89%87%E6%A0%B7%E5%BC%8F%E7%BC%BA%E5%A4%B1">1.xå¸¸è§é—®é¢˜</a><br>
<a href="https://antv-x6.gitee.io/zh/docs/tutorial/log#19x">åæ ‡è½¬æ¢</a><br>
<a href="https://antv-x6.gitee.io/zh/docs/api/graph/transform/#translating">Transform</a><br>
<a href="https://antv-x6.gitee.io/zh/docs/api/graph/model/#getconnectededges">Model</a><br>
<a href="https://antv-x6.gitee.io/zh/docs/api/graph/model/#getsuccessors">getSuccessors</a><br>
<a href="https://daizhigitee.gitee.io/x6-vue3-components/">X6 Vue3 Components</a><br>
<a href="https://sxdpanda.gitee.io/antv-admin/">è‡ªå®šä¹‰æ‹–æ‹½demo</a></p>
<hr>
<p><a href="https://www.yuque.com/sxd_panda/antv/dnd?view=doc_embed">ã€ŒAntVã€x6 è‡ªå®šä¹‰æ‹–æ‹½</a> | <a href="https://www.yuque.com/sxd_panda/antv/selection?view=doc_embed">ã€ŒAntVã€x6 æ¡†é€‰æ·»åŠ å³é”®èœå•</a> | <a href="https://www.yuque.com/sxd_panda/antv/export?view=doc_embed">ã€ŒAntVã€x6 å›¾ç‰‡å¯¼å‡ºé—®é¢˜æ±‡æ€»</a> | <a href="https://www.yuque.com/sxd_panda/antv/html-node?view=doc_embed">ã€ŒAntVã€X6 è‡ªå®šä¹‰htmlèŠ‚ç‚¹</a> | <a href="https://www.yuque.com/sxd_panda/antv/vue-node?view=doc_embed">ã€ŒAntVã€X6 è‡ªå®šä¹‰vueèŠ‚ç‚¹(vue3)</a></p>
<hr>
<p><a href="https://sxdpanda.gitee.io/graph-visualization/#/index">å…³ç³»å›¾è°±ï¼ˆå›½å†…é•œåƒï¼‰</a><br>
<a href="https://zlecheng.github.io/atlas-pages/#/index">å…³ç³»å›¾è°±ï¼ˆå¤‡ç”¨åœ°å€ï¼‰</a><br>
<a href="https://zlecheng.github.io/antv-page/#/home">AntV x6 è‡ªå®šä¹‰æ‹–æ‹½demo</a><br>
<a href="https://mp.weixin.qq.com/s/IGIjKjMMxaLvnimXbX5YDg">AntV X6å¼€å‘å®è·µï¼šè¸©è¿‡çš„å‘ä¸è§£å†³æ–¹æ¡ˆ</a></p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/webp/2578582/1702559928278-65460ac2-56fb-4629-a341-a9f10e76e8ec.webp#averageHue=%23181614&amp;clientId=ub724a9d6-9de2-4&amp;from=paste&amp;height=102&amp;id=Uka4m&amp;originHeight=127&amp;originWidth=341&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=6318&amp;status=done&amp;style=none&amp;taskId=uc8e7c8c7-462b-4546-bd47-5cd60f690d1&amp;title=&amp;width=272.8" alt="111.webp"></p>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>